(self["webpackChunkpearocr"]=self["webpackChunkpearocr"]||[]).push([[420],{2353:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});n(71);var r={_data:{},_changeCallBack:{}},o={version:2,errWordHandle:"Normal",highlightErrWordThres:.6,recThres:.6,unclipRadio:1.6,keepLowScore:!1,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1,recLangCode:"zh-CHS",sortingType:"byFileName",uiLangCode:"zh-CHS"};function i(e,t,n){"object"==typeof e?e[t]=n:"function"==typeof e&&e(n)}r.reset=()=>{r.setFromDict(o,!0),r.save()},r.save=()=>{let e={};for(const n in r._data)void 0!=o[n]&&(e[n]=r._data[n]);let t=JSON.stringify(e);localStorage.setItem("PearOcrConfig",t)},r.load=()=>{let e=localStorage.getItem("PearOcrConfig");if(e){if(r._data=JSON.parse(e),!r._data["version"]||r._data["version"]!=o.version)return console.log("unmatch version, cur:",o.version," store version:",r._data["version"]),void r.reset();for(const e in o)void 0==r._data[e]&&r.set(e,o[e])}else r.reset()},r.get=e=>r._data[e],r.set=(e,t)=>{let n=t;while("object"===typeof n&&"value"in n)n=n.value;if(r._changeCallBack[e]&&r._data[e]!=n)for(const o of r._changeCallBack[e])i(o,e,n);r._data[e]=n},r.setFromDict=(e,t=!1)=>{for(const n in e)(t||n in r._data)&&r.set(n,e[n])},r.getToDict=(e,t=!1)=>{for(const n in e){let o=r.get(n);if(void 0!=o){if(!t&&!(n in e))continue;"object"===typeof e[n]&&"value"in e[n]?e[n].value=o:e[n]=o}}},r.addMonitor=(e,t)=>{if("object"!=typeof e)void 0==r._changeCallBack[e]&&(r._changeCallBack[e]=[]),r._changeCallBack[e].push(t),r._data[e]&&i(t,e,r._data[e]);else for(const n of e)r.addMonitor(n,t)},r.load();const a=r},2673:(e,t,n)=>{"use strict";n.d(t,{Z:()=>lr});n(979),n(6105),n(2396),n(7280),n(5363),n(71),n(5860),n(7503),n(8455),n(541),n(9743),n(1118),n(323),n(246),n(6101),n(8009),n(4303);const r=n.p+"2cd7d26356c310de13de79467e21e063.wasm";var o="/";e=n.hmd(e);let i=r.substring(r.lastIndexOf("/")+1);var a,l="undefined"!==typeof l?l:{},s={};for(a in l)l.hasOwnProperty(a)&&(s[a]=l[a]);var u,c,d,f,h,m=[],p="./this.program",g=function(e,t){throw t},v="object"===typeof window,w="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,x="";function b(e){return l["locateFile"]?l["locateFile"](e,x):x+e}y?(x=w?n(8660).dirname(x)+"/":o+"/",u=function(e,t){return f||(f=n(7602)),h||(h=n(8660)),e=h["normalize"](e),f["readFileSync"](e,t?null:"utf8")},d=function(e){var t=u(e,!0);return t.buffer||(t=new Uint8Array(t)),A(t.buffer),t},c=function(e,t,r){f||(f=n(7602)),h||(h=n(8660)),e=h["normalize"](e),f["readFile"](e,(function(e,n){e?r(e):t(n.buffer)}))},process["argv"].length>1&&(p=process["argv"][1].replace(/\\/g,"/")),m=process["argv"].slice(2),e["exports"]=l,process["on"]("uncaughtException",(function(e){if(!(e instanceof or))throw e})),process["on"]("unhandledRejection",Se),g=function(e,t){if(he())throw process["exitCode"]=e,t;process["exit"](e)},l["inspect"]=function(){return"[Emscripten Module object]"}):(v||w)&&(w?x=self.location.href:"undefined"!==typeof document&&document.currentScript&&(x=document.currentScript.src),x=0!==x.indexOf("blob:")?x.substr(0,x.lastIndexOf("/")+1):"",u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},w&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),c=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var T=l["print"]||console.log.bind(console),C=l["printErr"]||console.warn.bind(console);for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a]);function I(e,t){if("function"===typeof WebAssembly.Function){for(var n={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"==t[0]?[]:[n[t[0]]]},o=1;o<t.length;++o)r.parameters.push(n[t[o]]);return new WebAssembly.Function(r,e)}var i=[1,0,1,96],a=t.slice(0,1),l=t.slice(1),s={i:127,j:126,f:125,d:124};i.push(l.length);for(o=0;o<l.length;++o)i.push(s[l[o]]);"v"==a?i.push(0):i=i.concat([1,s[a]]),i[1]=i.length-2;var u=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),c=new WebAssembly.Module(u),d=new WebAssembly.Instance(c,{e:{f:e}}),f=d.exports["f"];return f}s=null,l["arguments"]&&(m=l["arguments"]),l["thisProgram"]&&(p=l["thisProgram"]),l["quit"]&&(g=l["quit"]);var _,S=[];function P(){if(S.length)return S.pop();try{se.grow(1)}catch(C){if(!(C instanceof RangeError))throw C;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return se.length-1}function D(e,t){if(!_){_=new WeakMap;for(var n=0;n<se.length;n++){var r=se.get(n);r&&_.set(r,n)}}if(_.has(e))return _.get(e);var o=P();try{se.set(o,e)}catch(C){if(!(C instanceof TypeError))throw C;var i=I(e,t);se.set(o,i)}return _.set(e,o),o}function k(e,t){return D(e,t)}var W,$=function(e){e};l["wasmBinary"]&&(W=l["wasmBinary"]);var V,F=l["noExitRuntime"]||!0;"object"!==typeof WebAssembly&&Se("no native wasm support detected");var E=!1;function A(e,t){e||Se("Assertion failed: "+t)}var R="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function q(e,t,n){var r=t+n,o=t;while(e[o]&&!(o>=r))++o;if(o-t>16&&e.subarray&&R)return R.decode(e.subarray(t,o));var i="";while(t<o){var a=e[t++];if(128&a){var l=63&e[t++];if(192!=(224&a)){var s=63&e[t++];if(a=224==(240&a)?(15&a)<<12|l<<6|s:(7&a)<<18|l<<12|s<<6|63&e[t++],a<65536)i+=String.fromCharCode(a);else{var u=a-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&a)<<6|l)}else i+=String.fromCharCode(a)}return i}function B(e,t){return e?q(Z,e,t):""}function M(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var l=e.charCodeAt(a);if(l>=55296&&l<=57343){var s=e.charCodeAt(++a);l=65536+((1023&l)<<10)|1023&s}if(l<=127){if(n>=i)break;t[n++]=l}else if(l<=2047){if(n+1>=i)break;t[n++]=192|l>>6,t[n++]=128|63&l}else if(l<=65535){if(n+2>=i)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|63&l}else{if(n+3>=i)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|63&l}}return t[n]=0,n-o}function O(e,t,n){return M(e,Z,t,n)}function L(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var z,H,Z,U,j,N,Q,Y,X,G="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function J(e,t){var n=e,r=n>>1,o=r+t/2;while(!(r>=o)&&j[r])++r;if(n=r<<1,n-e>32&&G)return G.decode(Z.subarray(e,n));for(var i="",a=0;!(a>=t/2);++a){var l=U[e+2*a>>1];if(0==l)break;i+=String.fromCharCode(l)}return i}function K(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;n-=2;for(var r=t,o=n<2*e.length?n/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);U[t>>1]=a,t+=2}return U[t>>1]=0,t-r}function ee(e){return 2*e.length}function te(e,t){var n=0,r="";while(!(n>=t/4)){var o=N[e+4*n>>2];if(0==o)break;if(++n,o>=65536){var i=o-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}else r+=String.fromCharCode(o)}return r}function ne(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,o=r+n-4,i=0;i<e.length;++i){var a=e.charCodeAt(i);if(a>=55296&&a<=57343){var l=e.charCodeAt(++i);a=65536+((1023&a)<<10)|1023&l}if(N[t>>2]=a,t+=4,t+4>o)break}return N[t>>2]=0,t-r}function re(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function oe(e,t){H.set(e,t)}function ie(e,t,n){for(var r=0;r<e.length;++r)H[t++>>0]=e.charCodeAt(r);n||(H[t>>0]=0)}function ae(e,t){return e%t>0&&(e+=t-e%t),e}function le(e){z=e,l["HEAP8"]=H=new Int8Array(e),l["HEAP16"]=U=new Int16Array(e),l["HEAP32"]=N=new Int32Array(e),l["HEAPU8"]=Z=new Uint8Array(e),l["HEAPU16"]=j=new Uint16Array(e),l["HEAPU32"]=Q=new Uint32Array(e),l["HEAPF32"]=Y=new Float32Array(e),l["HEAPF64"]=X=new Float64Array(e)}l["INITIAL_MEMORY"];var se,ue=[],ce=[],de=[],fe=0;function he(){return F||fe>0}function me(){if(l["preRun"]){"function"==typeof l["preRun"]&&(l["preRun"]=[l["preRun"]]);while(l["preRun"].length)we(l["preRun"].shift())}Ee(ue)}function pe(){!0,Ee(ce)}function ge(){!0}function ve(){if(l["postRun"]){"function"==typeof l["postRun"]&&(l["postRun"]=[l["postRun"]]);while(l["postRun"].length)xe(l["postRun"].shift())}Ee(de)}function we(e){ue.unshift(e)}function ye(e){ce.unshift(e)}function xe(e){de.unshift(e)}var be=0,Te=null,Ce=null;function Ie(e){be++,l["monitorRunDependencies"]&&l["monitorRunDependencies"](be)}function _e(e){if(be--,l["monitorRunDependencies"]&&l["monitorRunDependencies"](be),0==be&&(null!==Te&&(clearInterval(Te),Te=null),Ce)){var t=Ce;Ce=null,t()}}function Se(e){l["onAbort"]&&l["onAbort"](e),e+="",C(e),E=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw t}l["preloadedImages"]={},l["preloadedAudios"]={};var Pe,De="data:application/octet-stream;base64,";function ke(e){return e.startsWith(De)}function We(e){return e.startsWith("file://")}function $e(e){try{if(e==Pe&&W)return new Uint8Array(W);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(C){Se(C)}}function Ve(){if(!W&&(v||w)){if("function"===typeof fetch&&!We(Pe))return fetch(Pe,{credentials:"same-origin"}).then((function(e){if(!e["ok"])throw"failed to load wasm binary file at '"+Pe+"'";return e["arrayBuffer"]()})).catch((function(){return $e(Pe)}));if(c)return new Promise((function(e,t){c(Pe,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return $e(Pe)}))}function Fe(){var e={a:er};function t(e,t){var n=e.exports;l["asm"]=n,V=l["asm"]["E"],le(V.buffer),se=l["asm"]["L"],ye(l["asm"]["F"]),_e("wasm-instantiate")}function n(e){t(e["instance"])}function r(t){return Ve().then((function(t){var n=WebAssembly.instantiate(t,e);return n})).then(t,(function(e){C("failed to asynchronously prepare wasm: "+e),Se(e)}))}function o(){return W||"function"!==typeof WebAssembly.instantiateStreaming||ke(Pe)||We(Pe)||"function"!==typeof fetch?r(n):fetch(Pe,{credentials:"same-origin"}).then((function(t){var o=WebAssembly.instantiateStreaming(t,e);return o.then(n,(function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),r(n)}))}))}if(Ie("wasm-instantiate"),l["instantiateWasm"])try{var i=l["instantiateWasm"](e,t);return i}catch(a){return C("Module.instantiateWasm callback failed with error: "+a),!1}return o(),{}}function Ee(e){while(e.length>0){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?se.get(n)():se.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}function Ae(e,t,n,r){Se("Assertion failed: "+B(e)+", at: "+[t?B(t):"unknown filename",n,r?B(r):"unknown function"])}function Re(e){return tr(e+16)+16}function qe(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){N[this.ptr+4>>2]=e},this.get_type=function(){return N[this.ptr+4>>2]},this.set_destructor=function(e){N[this.ptr+8>>2]=e},this.get_destructor=function(){return N[this.ptr+8>>2]},this.set_refcount=function(e){N[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,H[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=H[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,H[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=H[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=N[this.ptr>>2];N[this.ptr>>2]=e+1},this.release_ref=function(){var e=N[this.ptr>>2];return N[this.ptr>>2]=e-1,1===e}}Pe=i,ke(Pe)||(Pe=b(Pe));function Be(e,t,n){var r=new qe(e);throw r.init(t,n),e,e}var Me={};function Oe(e){while(e.length){var t=e.pop(),n=e.pop();n(t)}}function Le(e){return this["fromWireType"](Q[e>>2])}var ze={},He={},Ze={},Ue=48,je=57;function Ne(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ue&&t<=je?"_"+e:e}function Qe(e,t){return e=Ne(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ye(e,t){var n=Qe(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Xe=void 0;function Ge(e){throw new Xe(e)}function Je(e,t,n){function r(t){var r=n(t);r.length!==e.length&&Ge("Mismatched type converter count");for(var o=0;o<e.length;++o)lt(e[o],r[o])}e.forEach((function(e){Ze[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){He.hasOwnProperty(e)?o[t]=He[e]:(i.push(e),ze.hasOwnProperty(e)||(ze[e]=[]),ze[e].push((function(){o[t]=He[e],++a,a===i.length&&r(o)})))})),0===i.length&&r(o)}function Ke(e){var t=Me[e];delete Me[e];var n=t.rawConstructor,r=t.rawDestructor,o=t.fields,i=o.map((function(e){return e.getterReturnType})).concat(o.map((function(e){return e.setterArgumentType})));Je([e],i,(function(e){var i={};return o.forEach((function(t,n){var r=t.fieldName,a=e[n],l=t.getter,s=t.getterContext,u=e[n+o.length],c=t.setter,d=t.setterContext;i[r]={read:function(e){return a["fromWireType"](l(s,e))},write:function(e,t){var n=[];c(d,e,u["toWireType"](n,t)),Oe(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in i)t[n]=i[n].read(e);return r(e),t},toWireType:function(e,t){for(var o in i)if(!(o in t))throw new TypeError('Missing field:  "'+o+'"');var a=n();for(o in i)i[o].write(a,t[o]);return null!==e&&e.push(r,a),a},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:r}]}))}function et(e,t,n,r,o){}function tt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function nt(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);rt=e}var rt=void 0;function ot(e){var t="",n=e;while(Z[n])t+=rt[Z[n++]];return t}var it=void 0;function at(e){throw new it(e)}function lt(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||at('type "'+r+'" must have a positive integer typeid pointer'),He.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;at("Cannot register type '"+r+"' twice")}if(He[e]=t,delete Ze[e],ze.hasOwnProperty(e)){var o=ze[e];delete ze[e],o.forEach((function(e){e()}))}}function st(e,t,n,r,o){var i=tt(n);t=ot(t),lt(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:o},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=H;else if(2===n)r=U;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=N}return this["fromWireType"](r[e>>i])},destructorFunction:null})}function ut(e){if(!(this instanceof _t))return!1;if(!(e instanceof _t))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,o=e.$$.ptr;while(t.baseClass)n=t.upcast(n),t=t.baseClass;while(r.baseClass)o=r.upcast(o),r=r.baseClass;return t===r&&n===o}function ct(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function dt(e){function t(e){return e.$$.ptrType.registeredClass.name}at(t(e)+" instance already deleted")}var ft=!1;function ht(e){}function mt(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function pt(e){e.count.value-=1;var t=0===e.count.value;t&&mt(e)}function gt(e){return"undefined"===typeof FinalizationGroup?(gt=function(e){return e},e):(ft=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?pt(n):console.warn("object already deleted: "+n.ptr)}})),gt=function(e){return ft.register(e,e.$$,e.$$),e},ht=function(e){ft.unregister(e.$$)},gt(e))}function vt(){if(this.$$.ptr||dt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=gt(Object.create(Object.getPrototypeOf(this),{$$:{value:ct(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function wt(){this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&at("Object already scheduled for deletion"),ht(this),pt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function yt(){return!this.$$.ptr}var xt=void 0,bt=[];function Tt(){while(bt.length){var e=bt.pop();e.$$.deleteScheduled=!1,e["delete"]()}}function Ct(){return this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&at("Object already scheduled for deletion"),bt.push(this),1===bt.length&&xt&&xt(Tt),this.$$.deleteScheduled=!0,this}function It(){_t.prototype["isAliasOf"]=ut,_t.prototype["clone"]=vt,_t.prototype["delete"]=wt,_t.prototype["isDeleted"]=yt,_t.prototype["deleteLater"]=Ct}function _t(){}var St={};function Pt(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||at("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Dt(e,t,n){l.hasOwnProperty(e)?((void 0===n||void 0!==l[e].overloadTable&&void 0!==l[e].overloadTable[n])&&at("Cannot register public name '"+e+"' twice"),Pt(l,e,e),l.hasOwnProperty(n)&&at("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),l[e].overloadTable[n]=t):(l[e]=t,void 0!==n&&(l[e].numArguments=n))}function kt(e,t,n,r,o,i,a,l){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=l,this.pureVirtualFunctions=[]}function Wt(e,t,n){while(t!==n)t.upcast||at("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function $t(e,t){if(null===t)return this.isReference&&at("null is not a valid "+this.name),0;t.$$||at('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||at("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,r=Wt(t.$$.ptr,n,this.registeredClass);return r}function Vt(e,t){var n;if(null===t)return this.isReference&&at("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||at('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||at("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&at("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Wt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&at("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:at("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var o=t["clone"]();n=this.rawShare(n,gn((function(){o["delete"]()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:at("Unsupporting sharing policy")}return n}function Ft(e,t){if(null===t)return this.isReference&&at("null is not a valid "+this.name),0;t.$$||at('Cannot pass "'+wn(t)+'" as a '+this.name),t.$$.ptr||at("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&at("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,r=Wt(t.$$.ptr,n,this.registeredClass);return r}function Et(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function At(e){this.rawDestructor&&this.rawDestructor(e)}function Rt(e){null!==e&&e["delete"]()}function qt(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=qt(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Bt(){return Object.keys(zt).length}function Mt(){var e=[];for(var t in zt)zt.hasOwnProperty(t)&&e.push(zt[t]);return e}function Ot(e){xt=e,bt.length&&xt&&xt(Tt)}function Lt(){l["getInheritedInstanceCount"]=Bt,l["getLiveInheritedInstances"]=Mt,l["flushPendingDeletes"]=Tt,l["setDelayFunction"]=Ot}var zt={};function Ht(e,t){void 0===t&&at("ptr should not be undefined");while(e.baseClass)t=e.upcast(t),e=e.baseClass;return t}function Zt(e,t){return t=Ht(e,t),zt[t]}function Ut(e,t){t.ptrType&&t.ptr||Ge("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,r=!!t.smartPtr;return n!==r&&Ge("Both smartPtrType and smartPtr must be specified"),t.count={value:1},gt(Object.create(e,{$$:{value:t}}))}function jt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Zt(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n["clone"]();var r=n["clone"]();return this.destructor(e),r}function o(){return this.isSmartPointer?Ut(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ut(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),l=St[a];if(!l)return o.call(this);i=this.isConst?l.constPointerType:l.pointerType;var s=qt(t,this.registeredClass,i.registeredClass);return null===s?o.call(this):this.isSmartPointer?Ut(i.registeredClass.instancePrototype,{ptrType:i,ptr:s,smartPtrType:this,smartPtr:e}):Ut(i.registeredClass.instancePrototype,{ptrType:i,ptr:s})}function Nt(){Qt.prototype.getPointee=Et,Qt.prototype.destructor=At,Qt.prototype["argPackAdvance"]=8,Qt.prototype["readValueFromPointer"]=Le,Qt.prototype["deleteObject"]=Rt,Qt.prototype["fromWireType"]=jt}function Qt(e,t,n,r,o,i,a,l,s,u,c){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=l,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=c,o||void 0!==t.baseClass?this["toWireType"]=Vt:r?(this["toWireType"]=$t,this.destructorFunction=null):(this["toWireType"]=Ft,this.destructorFunction=null)}function Yt(e,t,n){l.hasOwnProperty(e)||Ge("Replacing nonexistant public symbol"),void 0!==l[e].overloadTable&&void 0!==n?l[e].overloadTable[n]=t:(l[e]=t,l[e].argCount=n)}function Xt(e,t,n){var r=l["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}function Gt(e,t,n){return e.includes("j")?Xt(e,t,n):se.get(t).apply(null,n)}function Jt(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return Gt(e,t,n)}}function Kt(e,t){function n(){return e.includes("j")?Jt(e,t):se.get(t)}e=ot(e);var r=n();return"function"!==typeof r&&at("unknown function pointer with signature "+e+": "+t),r}var en=void 0;function tn(e){var t=rr(e),n=ot(t);return nr(t),n}function nn(e,t){var n=[],r={};function o(e){r[e]||He[e]||(Ze[e]?Ze[e].forEach(o):(n.push(e),r[e]=!0))}throw t.forEach(o),new en(e+": "+n.map(tn).join([", "]))}function rn(e,t,n,r,o,i,a,l,s,u,c,d,f){c=ot(c),i=Kt(o,i),l&&(l=Kt(a,l)),u&&(u=Kt(s,u)),f=Kt(d,f);var h=Ne(c);Dt(h,(function(){nn("Cannot construct "+c+" due to unbound types",[r])})),Je([e,t,n],r?[r]:[],(function(t){var n,o;t=t[0],r?(n=t.registeredClass,o=n.instancePrototype):o=_t.prototype;var a=Qe(h,(function(){if(Object.getPrototypeOf(this)!==s)throw new it("Use 'new' to construct "+c);if(void 0===d.constructor_body)throw new it(c+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(void 0===e)throw new it("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),s=Object.create(o,{constructor:{value:a}});a.prototype=s;var d=new kt(c,a,s,f,n,i,l,u),m=new Qt(c,d,!0,!1,!1),p=new Qt(c+"*",d,!1,!1,!1),g=new Qt(c+" const*",d,!1,!0,!1);return St[e]={pointerType:p,constPointerType:g},Yt(h,a),[m,p,g]}))}function on(e,t){for(var n=[],r=0;r<e;r++)n.push(N[(t>>2)+r]);return n}function an(e,t,n,r,o,i){A(t>0);var a=on(t,n);o=Kt(r,o);var l=[i],s=[];Je([],[e],(function(e){e=e[0];var n="constructor "+e.name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new it("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){nn("Cannot construct "+e.name+" due to unbound types",a)},Je([],a,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&at(n+" called with "+arguments.length+" arguments, expected "+(t-1)),s.length=0,l.length=t;for(var e=1;e<t;++e)l[e]=r[e]["toWireType"](s,arguments[e-1]);var i=o.apply(null,l);return Oe(s),r[0]["fromWireType"](i)},[]})),[]}))}function ln(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=Qe(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return o instanceof Object?o:r}function sn(e,t,n,r,o){var i=t.length;i<2&&at("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,l=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){l=!0;break}var u="void"!==t[0].name,c="",d="";for(s=0;s<i-2;++s)c+=(0!==s?", ":"")+"arg"+s,d+=(0!==s?", ":"")+"arg"+s+"Wired";var f="return function "+Ne(e)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";l&&(f+="var destructors = [];\n");var h=l?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[at,r,o,Oe,t[0],t[1]];a&&(f+="var thisWired = classParam.toWireType("+h+", this);\n");for(s=0;s<i-2;++s)f+="var arg"+s+"Wired = argType"+s+".toWireType("+h+", arg"+s+"); // "+t[s+2].name+"\n",m.push("argType"+s),p.push(t[s+2]);if(a&&(d="thisWired"+(d.length>0?", ":"")+d),f+=(u?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",l)f+="runDestructors(destructors);\n";else for(s=a?1:2;s<t.length;++s){var g=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==t[s].destructorFunction&&(f+=g+"_dtor("+g+"); // "+t[s].name+"\n",m.push(g+"_dtor"),p.push(t[s].destructorFunction))}u&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",m.push(f);var v=ln(Function,m).apply(null,p);return v}function un(e,t,n,r,o,i,a,l){var s=on(n,r);t=ot(t),i=Kt(o,i),Je([],[e],(function(e){e=e[0];var r=e.name+"."+t;function o(){nn("Cannot call "+r+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),l&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,c=u[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===n-2?(o.argCount=n-2,o.className=e.name,u[t]=o):(Pt(u,t,r),u[t].overloadTable[n-2]=o),Je([],s,(function(o){var l=sn(r,o,e,i,a);return void 0===u[t].overloadTable?(l.argCount=n-2,u[t]=l):u[t].overloadTable[n-2]=l,[]})),[]}))}var cn=[],dn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function fn(e){e>4&&0===--dn[e].refcount&&(dn[e]=void 0,cn.push(e))}function hn(){for(var e=0,t=5;t<dn.length;++t)void 0!==dn[t]&&++e;return e}function mn(){for(var e=5;e<dn.length;++e)if(void 0!==dn[e])return dn[e];return null}function pn(){l["count_emval_handles"]=hn,l["get_first_emval"]=mn}function gn(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=cn.length?cn.pop():dn.length;return dn[t]={refcount:1,value:e},t}}function vn(e,t){t=ot(t),lt(e,{name:t,fromWireType:function(e){var t=dn[e].value;return fn(e),t},toWireType:function(e,t){return gn(t)},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:null})}function wn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function yn(e,t){switch(t){case 2:return function(e){return this["fromWireType"](Y[e>>2])};case 3:return function(e){return this["fromWireType"](X[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function xn(e,t,n){var r=tt(n);t=ot(t),lt(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+wn(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:yn(t,r),destructorFunction:null})}function bn(e,t,n){switch(t){case 0:return n?function(e){return H[e]}:function(e){return Z[e]};case 1:return n?function(e){return U[e>>1]}:function(e){return j[e>>1]};case 2:return n?function(e){return N[e>>2]}:function(e){return Q[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Tn(e,t,n,r,o){t=ot(t),-1===o&&(o=4294967295);var i=tt(n),a=function(e){return e};if(0===r){var l=32-8*n;a=function(e){return e<<l>>>l}}var s=t.includes("unsigned");lt(e,{name:t,fromWireType:a,toWireType:function(e,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+wn(n)+'" to '+this.name);if(n<r||n>o)throw new TypeError('Passing a number "'+wn(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+o+"]!");return s?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:bn(t,i,0!==r),destructorFunction:null})}function Cn(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=r[t];function i(e){e>>=2;var t=Q,n=t[e],r=t[e+1];return new o(z,r,n)}n=ot(n),lt(e,{name:n,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function In(e,t){t=ot(t);var n="std::string"===t;lt(e,{name:t,fromWireType:function(e){var t,r=Q[e>>2];if(n)for(var o=e+4,i=0;i<=r;++i){var a=e+4+i;if(i==r||0==Z[a]){var l=a-o,s=B(o,l);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),o=a+1}}else{var u=new Array(r);for(i=0;i<r;++i)u[i]=String.fromCharCode(Z[e+4+i]);t=u.join("")}return nr(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"===typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||at("Cannot pass non-string to std::string"),r=n&&o?function(){return L(t)}:function(){return t.length};var i=r(),a=tr(4+i+1);if(Q[a>>2]=i,n&&o)O(t,a+4,i+1);else if(o)for(var l=0;l<i;++l){var s=t.charCodeAt(l);s>255&&(nr(a),at("String has UTF-16 code units that do not fit in 8 bits")),Z[a+4+l]=s}else for(l=0;l<i;++l)Z[a+4+l]=t[l];return null!==e&&e.push(nr,a),a},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:function(e){nr(e)}})}function _n(e,t,n){var r,o,i,a,l;n=ot(n),2===t?(r=J,o=K,a=ee,i=function(){return j},l=1):4===t&&(r=te,o=ne,a=re,i=function(){return Q},l=2),lt(e,{name:n,fromWireType:function(e){for(var n,o=Q[e>>2],a=i(),s=e+4,u=0;u<=o;++u){var c=e+4+u*t;if(u==o||0==a[c>>l]){var d=c-s,f=r(s,d);void 0===n?n=f:(n+=String.fromCharCode(0),n+=f),s=c+t}}return nr(e),n},toWireType:function(e,r){"string"!==typeof r&&at("Cannot pass non-string to C++ string type "+n);var i=a(r),s=tr(4+i+t);return Q[s>>2]=i>>l,o(r,s+4,i+t),null!==e&&e.push(nr,s),s},argPackAdvance:8,readValueFromPointer:Le,destructorFunction:function(e){nr(e)}})}function Sn(e,t,n,r,o,i){Me[e]={name:ot(t),rawConstructor:Kt(n,r),rawDestructor:Kt(o,i),fields:[]}}function Pn(e,t,n,r,o,i,a,l,s,u){Me[e].fields.push({fieldName:ot(t),getterReturnType:n,getter:Kt(r,o),getterContext:i,setterArgumentType:a,setter:Kt(l,s),setterContext:u})}function Dn(e,t){t=ot(t),lt(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function kn(e){e>4&&(dn[e].refcount+=1)}function Wn(e,t){var n=He[e];return void 0===n&&at(t+" has unknown type "+tn(e)),n}function $n(e,t){e=Wn(e,"_emval_take_value");var n=e["readValueFromPointer"](t);return gn(n)}function Vn(){Se()}function Fn(e,t,n){Z.copyWithin(e,t,t+n)}function En(e){try{return V.grow(e-z.byteLength+65535>>>16),le(V.buffer),1}catch(t){}}function An(e){var t=Z.length;e>>>=0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var i=Math.min(n,ae(Math.max(e,o),65536)),a=En(i);if(a)return!0}return!1}var Rn={};function qn(){return p||"./this.program"}function Bn(){if(!Bn.strings){var e=("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:qn()};for(var n in Rn)void 0===Rn[n]?delete t[n]:t[n]=Rn[n];var r=[];for(var n in t)r.push(n+"="+t[n]);Bn.strings=r}return Bn.strings}var Mn={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Mn.buffers[e];0===t||10===t?((1===e?T:C)(q(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){Mn.varargs+=4;var e=N[Mn.varargs-4>>2];return e},getStr:function(e){var t=B(e);return t},get64:function(e,t){return e}};function On(e,t){var n=0;return Bn().forEach((function(r,o){var i=t+n;N[e+4*o>>2]=i,ie(r,i),n+=r.length+1})),0}function Ln(e,t){var n=Bn();N[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),N[t>>2]=r,0}function zn(e){ar(e)}function Hn(e,t,n,r){for(var o=0,i=0;i<n;i++){for(var a=N[t+8*i>>2],l=N[t+(8*i+4)>>2],s=0;s<l;s++)Mn.printChar(e,Z[a+s]);o+=l}return N[r>>2]=o,0}function Zn(e){$(e)}function Un(e){return e%4===0&&(e%100!==0||e%400===0)}function jn(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var Nn=[31,29,31,30,31,30,31,31,30,31,30,31],Qn=[31,28,31,30,31,30,31,31,30,31,30,31];function Yn(e,t){var n=new Date(e.getTime());while(t>0){var r=Un(n.getFullYear()),o=n.getMonth(),i=(r?Nn:Qn)[o];if(!(t>i-n.getDate()))return n.setDate(n.getDate()+t),n;t-=i-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function Xn(e,t,n,r){var o=N[r+40>>2],i={tm_sec:N[r>>2],tm_min:N[r+4>>2],tm_hour:N[r+8>>2],tm_mday:N[r+12>>2],tm_mon:N[r+16>>2],tm_year:N[r+20>>2],tm_wday:N[r+24>>2],tm_yday:N[r+28>>2],tm_isdst:N[r+32>>2],tm_gmtoff:N[r+36>>2],tm_zone:o?B(o):""},a=B(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in l)a=a.replace(new RegExp(s,"g"),l[s]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){var r="number"===typeof e?e.toString():e||"";while(r.length<t)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function h(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function p(e){var t=Yn(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=m(n),i=m(r);return h(o,t)<=0?h(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){var t=e.tm_year+1900;return f(t/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return p(e).toString().substring(2)},"%G":function(e){return p(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+jn(Un(e.tm_year+1900)?Nn:Qn,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:Yn(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(n,r)<0){var o=jn(Un(r.getFullYear())?Nn:Qn,r.getMonth()-1)-31,i=31-n.getDate(),a=i+o+r.getDate();return f(Math.ceil(a/7),2)}return 0===h(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),o=m(n),i=m(r),a=Yn(new Date(e.tm_year+1900,0,1),e.tm_yday);return h(a,o)<0?"53":h(i,a)<=0?"01":(t=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:Yn(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(n,r)<0){var o=jn(Un(r.getFullYear())?Nn:Qn,r.getMonth()-1)-31,i=31-n.getDate(),a=i+o+r.getDate();return f(Math.ceil(a/7),2)}return 0===h(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=Math.abs(t)/60,t=t/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in g)a.includes(s)&&(a=a.replace(new RegExp(s,"g"),g[s](i)));var v=Jn(a,!1);return v.length>t?0:(oe(v,e),v.length-1)}function Gn(e,t,n,r){return Xn(e,t,n,r)}function Jn(e,t,n){var r=n>0?n:L(e)+1,o=new Array(r),i=M(e,o,0,o.length);return t&&(o.length=i),o}Xe=l["InternalError"]=Ye(Error,"InternalError"),nt(),it=l["BindingError"]=Ye(Error,"BindingError"),It(),Nt(),Lt(),en=l["UnboundTypeError"]=Ye(Error,"UnboundTypeError"),pn();var Kn,er={g:Ae,e:Re,d:Be,r:Ke,s:et,B:st,i:rn,h:an,b:un,A:vn,n:xn,f:Tn,c:Cn,o:In,j:_n,D:Sn,z:Pn,C:Dn,p:fn,q:kn,k:$n,l:Vn,u:Fn,v:An,x:On,y:Ln,a:zn,m:Hn,t:Zn,w:Gn},tr=(Fe(),l["___wasm_call_ctors"]=function(){return(l["___wasm_call_ctors"]=l["asm"]["F"]).apply(null,arguments)},l["_ImageGrabBoxROI"]=function(){return(l["_ImageGrabBoxROI"]=l["asm"]["G"]).apply(null,arguments)},l["_malloc"]=function(){return(tr=l["_malloc"]=l["asm"]["H"]).apply(null,arguments)}),nr=(l["__malloc"]=function(){return(l["__malloc"]=l["asm"]["I"]).apply(null,arguments)},l["__free"]=function(){return(l["__free"]=l["asm"]["J"]).apply(null,arguments)},l["_free"]=function(){return(nr=l["_free"]=l["asm"]["K"]).apply(null,arguments)}),rr=l["___getTypeName"]=function(){return(rr=l["___getTypeName"]=l["asm"]["M"]).apply(null,arguments)};l["___embind_register_native_and_builtin_types"]=function(){return(l["___embind_register_native_and_builtin_types"]=l["asm"]["N"]).apply(null,arguments)},l["dynCall_viijii"]=function(){return(l["dynCall_viijii"]=l["asm"]["O"]).apply(null,arguments)},l["dynCall_jiji"]=function(){return(l["dynCall_jiji"]=l["asm"]["P"]).apply(null,arguments)},l["dynCall_iiiiij"]=function(){return(l["dynCall_iiiiij"]=l["asm"]["Q"]).apply(null,arguments)},l["dynCall_iiiiijj"]=function(){return(l["dynCall_iiiiijj"]=l["asm"]["R"]).apply(null,arguments)},l["dynCall_iiiiiijj"]=function(){return(l["dynCall_iiiiiijj"]=l["asm"]["S"]).apply(null,arguments)};function or(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ir(e){function t(){Kn||(Kn=!0,l["calledRun"]=!0,E||(pe(),l["onRuntimeInitialized"]&&l["onRuntimeInitialized"](),ve()))}e=e||m,be>0||(me(),be>0||(l["setStatus"]?(l["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){l["setStatus"]("")}),1),t()}),1)):t()))}function ar(e,t){e,he()||(ge(),l["onExit"]&&l["onExit"](e),E=!0),g(e,new or(e))}if(l["addFunction"]=k,Ce=function e(){Kn||ir(),Kn||(Ce=e)},l["run"]=ir,l["preInit"]){"function"==typeof l["preInit"]&&(l["preInit"]=[l["preInit"]]);while(l["preInit"].length>0)l["preInit"].pop()()}ir();const lr={Module:l}},6420:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>On});var r=n(3673);function o(e,t,n,o,i,a){const l=(0,r.up)("Index");return(0,r.wg)(),(0,r.j4)(l)}function i(e,t,n,o,i,a){const l=(0,r.up)("MainResultView"),s=(0,r.up)("ImageList"),u=(0,r.up)("UploadImage"),c=(0,r.up)("SingleTextView"),d=(0,r.up)("RecLanguageLoader"),f=(0,r.up)("q-resize-observer"),h=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(h,{class:"flex flex-center size-alignment"},{default:(0,r.w5)((()=>[(0,r.Wm)(l),(0,r.Wm)(s),(0,r.Wm)(u),(0,r.Wm)(c),(0,r.Wm)(d),(0,r.Wm)(f,{onResize:e.onResize},null,8,["onResize"])])),_:1})}var a=n(2323),l=n(8880);(0,r.dD)("data-v-3a3d6e58");const s={class:"boundDiv ImageList"},u=["onClick"],c=["src"],d={class:"Toolbar ImageListToolbar text-light-blue"};function f(e,t,n,o,i,f){const h=(0,r.up)("q-circular-progress"),m=(0,r.up)("q-spinner-ios"),p=(0,r.up)("q-inner-loading"),g=(0,r.up)("q-icon"),v=(0,r.up)("q-virtual-scroll"),w=(0,r.up)("ToolBtn"),y=(0,r.up)("q-item-section"),x=(0,r.up)("q-item"),b=(0,r.up)("q-list"),T=(0,r.up)("q-menu"),C=(0,r.up)("ExportPdf"),I=(0,r.up)("ExportTxt"),_=(0,r.up)("Configure"),S=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",s,[(0,r.Wm)(v,{items:i.RecoDataList,"virtual-scroll-horizontal":""},{default:(0,r.w5)((({item:t,index:n})=>[((0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,a.C_)(["ImageItem relative-position delete",{ImageItemUnselected:i.selectedItem!==t,ImageItemSelected:i.selectedItem===t}]),onClick:e=>f.onItemClick(t)},[(0,r._)("img",{class:"ImageItemSize",src:t.url},null,8,c),(0,r.Wm)(p,{showing:void 0==t.text},{default:(0,r.w5)((()=>[t.isScaning?((0,r.wg)(),(0,r.j4)(h,{key:0,"show-value":"",class:"text-light-blue q-ma-md",value:i.progressVal,size:"50px",color:"light-blue"},null,8,["value"])):(0,r.kq)("",!0),t.isScaning?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:1,size:"50%",color:"primary"}))])),_:2},1032,["showing"]),t.isScaning?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(g,{key:0,onClick:(0,l.iM)((e=>f.onItemDelete(t)),["stop"]),class:(0,a.C_)([{DeleteBtnHide:!e.$q.platform.is.mobile},"DeleteBtn DeleteBtnHV"]),name:"o_delete_outline"},null,8,["onClick","class"]))],10,u))])),_:1},8,["items"])]),(0,r._)("div",d,[(0,r.Wm)(w,{label:e.$t("ImageList.addImage"),IconName:"o_add_photo_alternate",onClick:f.onUploadClick},null,8,["label","onClick"]),e.$q.platform.is.mobile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(w,{key:0,label:e.$t("ImageList.fromClipboard"),IconName:"content_paste",onClick:f.onPasteImage},null,8,["label","onClick"])),(0,r._)("div",null,[(0,r.Wm)(w,{label:e.$t("ImageList.more"),IconName:"more_horiz"},null,8,["label"]),(0,r.Wm)(T,{modelValue:i.showMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>i.showMenu=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.MenuItems,(t=>((0,r.wg)(),(0,r.j4)(b,{dense:"",style:{"min-width":"100px"},key:t.label},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(x,{clickable:"",disable:!(!t.cond||t.cond()),onClick:t.func},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{color:"primary",name:t.icon},null,8,["name"])])),_:2},1024),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.$t(t.label)),1)])),_:2},1024)])),_:2},1032,["disable","onClick"]),[[S]])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])]),i.ExportPdfShow?((0,r.wg)(),(0,r.j4)(C,{key:0,modelValue:i.ExportPdfShow,"onUpdate:modelValue":t[1]||(t[1]=e=>i.ExportPdfShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0),i.ExportTxtShow?((0,r.wg)(),(0,r.j4)(I,{key:1,modelValue:i.ExportTxtShow,"onUpdate:modelValue":t[2]||(t[2]=e=>i.ExportTxtShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0),i.ConfigureShow?((0,r.wg)(),(0,r.j4)(_,{key:2,modelValue:i.ConfigureShow,"onUpdate:modelValue":t[3]||(t[3]=e=>i.ConfigureShow=e)},null,8,["modelValue"])):(0,r.kq)("",!0)],64)}(0,r.Cn)();n(71);var h={callBackDict:{},keyValDict:{},addevent:(e,t,n=!1)=>{h.callBackDict[e]||(h.callBackDict[e]=[]),h.callBackDict[e].push(t),0==n&&void 0!=h.keyValDict[e]&&t(h.keyValDict[e])},rmevent:(e,t)=>{if(!h.callBackDict[e])return;let n=h.callBackDict[e].indexOf(t);n>=0&&h.callBackDict[e].splice(n,1)},set:(e,t)=>{if(h.keyValDict[e]=t,h.callBackDict[e])for(const n of h.callBackDict[e])n(t)},trig:e=>{h.set(e,!h.keyValDict[e])},get:e=>h.keyValDict[e]};const m=h;n(7965),n(6101),n(979),n(6105),n(2396);n.p;var p=n(2673);function g(){return new Worker(n.p+"js/AntOcrWorker.08bae6f2.worker.js")}const v=n.p+"f91b0416e9517bfd576b4654bc712562.tf",w=n.p+"592ed67e13a2ca0ca7bd0614ff158eb5.tf",y=n.p+"644bcca4eea52af1e33121a940e41599.tf",x=n.p+"c43b6f3fff445f88847343a445f01c04.tf",b=n.p+"36f987338d326a0339fbf5662ec04473.tf",T=n.p+"0120c1c55690be53d0d59a49bfa4f228.tf",C=n.p+"7ab430b2ff567e1eff986ea092bb78e0.tf",I=n.p+"b66f6a54ccc99cf6f08e71e6ab25010d.tf",_=n.p+"de3fd5408fa47bb690369bbb82b78ce8.tf",S=n.p+"7ec01f4aebd077a3a9d9d1e6cd7b8e2b.tf",P=n.p+"dfbc0cf2d00af43499155509ba1dc806.tf";let D={"zh-CHS":[v,w,y],"en-US":[v,x,b],ja:[v,T,C],ko:[v,I,_],"zh-CHT":[v,S,P]};var k={langList:["zh-CHS","zh-CHT","en-US","ja","ko"],calcProgress:function(){let e=k.totalSize[0]+k.totalSize[1]+k.totalSize[2],t=k.loadedSize[0]+k.loadedSize[1]+k.loadedSize[2];k.onprogress&&k.onprogress(t,e)},downLang:function(e){k.urls=D[e],k.xhrarr=[new XMLHttpRequest,new XMLHttpRequest,new XMLHttpRequest],k.totalSize=[2304374,4362980,13250],k.loadedSize=[0,0,0],k.buffarr=[void 0,void 0,void 0];for(let t=0;t<k.xhrarr.length;t++){let e=k.xhrarr[t];e.open("GET",k.urls[t]),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="arraybuffer",e.xhrarrID=t,e.onprogress=function(e){e.lengthComputable&&(k.totalSize[this.xhrarrID]=e.total,k.loadedSize[this.xhrarrID]=e.loaded,k.calcProgress())},e.onload=function(e){4===this.readyState&&200===this.status&&(k.buffarr[this.xhrarrID]=this.response,k.buffarr[0]&&k.buffarr[1]&&k.buffarr[2]&&(k.onfinish&&k.onfinish(k.buffarr),k.buffarr=void 0))},e.send(null)}}};const W=k;var $=document.createElement("canvas"),V=$.getContext("2d");function F(e,t){$.width=e,$.height=t}var E={createNew:function(){var e={isBusy:!1,txtCount:0};return e.langList=W.langList,e.ocrImage=function(t){F(t.width,t.height),V.fillStyle="white",V.fillRect(0,0,t.width,t.height),V.drawImage(t,0,0);var n=V.getImageData(0,0,t.width,t.height);let r=new ArrayBuffer(n.data.length);var o=new Uint8Array(r);for(let e=0;e<o.length;e++)o[e]=n.data[e];e.worker.postMessage(["rec",t.width,t.height,r],[r])},e.ocrImageUrl=function(t,n){var r=new Image;e.isBusy?e["onError"]&&e["onError"]("antocr is busy"):(e.isBusy=!0,r.userData=n,r.onload=function(){e.onImageLoad&&e.onImageLoad(this,this.userData),e.ocrImage(this)},r.src=t)},e.onmessage=function(t){if("Init"==t.data)return e.onRuntimeInitialized&&e.onRuntimeInitialized(),void(e.init=!0);if("recFinish"==t.data[0]){var n=JSON.parse(t.data[3]);n.langCode=e.langCode,e.isBusy=!1,e["onRecognitionCompleted"]&&e["onRecognitionCompleted"](n)}"progressCB"==t.data[0]&&e["onProgress"]&&e["onProgress"](t.data[1],t.data[2])},e.init=function(){e.worker=new g,e.worker.onmessage=e.onmessage},e.setLang=function(t){e.onSetLangBegin&&e.onSetLangBegin(t),W.downLang(t),W.onprogress=e.onprogress,W.onfinish=function(n){e.worker.postMessage(["setParams",n[0],n[1],n[2]],[n[0],n[1],n[2]]),e.langCode=t,e.onSetLangFinish&&e.onSetLangFinish()}},e}};let A=p.Z.Module;function R(e,t){let n=e;F(n.width,n.height),V.fillStyle="white",V.fillRect(0,0,n.width,n.height),V.drawImage(n,0,0);var r=V.getImageData(0,0,n.width,n.height);let o=new ArrayBuffer(r.data.length);var i=new Uint8Array(o);for(let d=0;d<i.length;d++)i[d]=r.data[d];let a=A.__malloc(i.length);A.HEAPU8.set(i,a);let l=A._ImageGrabBoxROI(a,n.width,n.height,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);A.__free(a);let s=A.HEAPU32[l/4],u=A.HEAPU32[l/4+1];l+=8;const c=A.HEAPU8.subarray(l,l+s*u*4);return A.__free(l-8),F(s,u),r=V.createImageData(s,u),r.data.set(c),V.putImageData(r,0,0),{width:s,height:u,url:$.toDataURL("image/png")}}var q=E.createNew(),B=n(6417),M=n(2353),O=n(4325);let L,z={},H=1;const{t:Z}=O.i18n.global;function U(e){for(let t=0;t<L.length;t++)if(e==L[t].id)return t;return-1}function j(e,t){const n=.7;let r=e.rect[0].y,o=t.rect[0].y,i=e.rect[2].y-e.rect[0].y,a=t.rect[2].y-t.rect[0].y;return r+=i*(1-n)/2,o+=a*(1-n)/2,i*=n,a*=n,!(r+i<o)&&!(o+a<r)}function N(){return-1!=navigator.userAgent.indexOf("Firefox")}function Q(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),i=e.getMinutes(),a=e.getSeconds();return t+"-"+n+"-"+r+"-"+o+"-"+i+"-"+a}z.initList=function(e){void 0==L&&(L=e,z.RecoDataList=L)},z.selectedId=-1,z.selectedChangeCB=[],z.scannedCount=0,z.changeSelected=function(e){if(e==z.selectedId)return;z.selectedId=e;let t=U(e);console.log("new selectedId,",z.selectedId),t<0?M.Z.set("selectedItem",{}):M.Z.set("selectedItem",L[t])},z.deleteAll=function(){let e=0;while(L.length>e)L[e].isScaning?e+=1:L.splice(e,1);z.changeSelected(e>0?L[0].id:-1)},z.deleteItem=function(e){let t=U(e);L.splice(t,1),z.selectedId==e&&(L.length>t?z.changeSelected(L[t].id):L.length>0?z.changeSelected(L[L.length-1].id):z.changeSelected(-1))},z.getSelectedItem=function(){return console.log("getSelectedItem"),z.selectedId>-1?L[U(z.selectedId)]:void 0},z.getItemByID=function(e){let t=U(e);return t<0?{}:L[t]},z.addImage=function(e,t){var n=new Image;n.onload=function(){var e={};e.url=this.src,e.selected=!1,e.id=H,e.filename=this.filename,e.imgWidth=this.width,e.imgHeight=this.height,H+=1,L.unshift(e),q.isBusy||z.recognitionImage(e.id)},n.src=e,n.filename=t},z.refreshItemText=function(e){let t="",n=e.detail,r=M.Z.get("recThres");for(let o=0;o<n.length;o++)n[o].score<r||(""!==t?(j(n[o-1],n[o])||(t+="\n"),t=t+" "+n[o].text):t=n[o].text);e.text=t},z.recognitionImage=function(e){let t;if(q.isBusy)return!1;if(e)t=U(e);else{if(e=z.selectedId,e<0)return;if(t=U(e),void 0!=L[t].text){for(t=L.length-1;t>=0;t--)if(void 0==L[t].text){e=L[t].id;break}if(t<0)return}}void 0==L[t].text&&(m.trig("RecognitionBegin"),q.onRecognitionCompleted=n=>{t=U(e),t<0||(L[t].detail=n,L[t].isScaning=!1,z.scannedCount++,z.refreshItemText(L[t]),z.selectedId==L[t].id&&m.trig("SeclectedRecoStateChanged"),z.recognitionImage(),console.log("recognitionImage next"))},q.onImageLoad=(e,n)=>{t=U(n),z.selectedId<=0&&z.changeSelected(L[t].id)},L[t].isScaning=!0,q.ocrImageUrl(L[t].url,e),console.log("ocrImageUrl",e))},z.reRecoAll=function(e){for(const t of L)t.text=void 0;z.recognitionImage(),m.trig("SeclectedRecoStateChanged")},z.reReco=function(e){void 0==e&&(e=z.selectedId);let t=U(e);L[t].text=void 0,z.recognitionImage(),e==z.selectedId&&m.trig("SeclectedRecoStateChanged")},z.addFromClipboard=function(e){if(void 0==e)N()?B.Z.create({type:"warning",message:"imagelist.tips_clipboard_firefox_only_hotkey"}):navigator.clipboard.read().then((e=>{console.log("Pasted content: ",e);var t=!1;for(let r=0;r<e.length;r++)for(var n of e[r].types)-1!==n.indexOf("image")&&(t=!0,e[r].getType(n).then((e=>{let t=URL.createObjectURL(e);z.addImage(t,"Clipboard_"+Q()+".png")})));t||B.Z.create({type:"warning",message:Z("imagelist.tips_clipboard_no_image")})})).catch((e=>{console.log("i18n",O.i18n),B.Z.create({type:"negative",message:Z("imagelist.tips_clipboard_faild")})}));else for(const t of e.clipboardData.items){if(0!=t.type.indexOf("image"))return;let n=t.getAsFile(),r=URL.createObjectURL(n);z.addImage(r,"Clipboard_"+Q()+".png"),e.preventDefault(),e.stopPropagation()}},window.addEventListener("paste",(async function(e){console.log("addFromClipboard",e),z.addFromClipboard(e)})),z.empty=function(){return!L.length},(0,r.dD)("data-v-2508d9a8");const Y={key:1,class:"iconlabel block"};function X(e,t,n,o,i,l){const s=(0,r.up)("q-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["BtnBound",{disable:n.disable}]),style:(0,a.j5)("font-size: "+(n.IconSize?n.IconSize:"30px"))},[n.IconName?((0,r.wg)(),(0,r.j4)(s,{key:0,name:n.IconName},null,8,["name"])):(0,r.kq)("",!0),n.label?((0,r.wg)(),(0,r.iD)("span",Y,(0,a.zw)(n.label),1)):(0,r.kq)("",!0)],6)}(0,r.Cn)();const G={props:["IconName","label","disable","IconSize"]};var J=n(4554),K=n(7518),ee=n.n(K);G.render=X,G.__scopeId="data-v-2508d9a8";const te=G;ee()(G,"components",{QIcon:J.Z}),(0,r.dD)("data-v-02045226");const ne=["src"],re={class:"text-weight-bold"};function oe(e,t,n,o,i,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),h=(0,r.up)("q-toolbar"),m=(0,r.up)("q-footer"),p=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-form"),w=(0,r.up)("q-page"),y=(0,r.up)("q-page-container"),x=(0,r.up)("q-layout"),b=(0,r.up)("q-dialog"),T=(0,r.up)("q-linear-progress"),C=(0,r.up)("q-card-section"),I=(0,r.up)("q-card"),_=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n.modelValue&&i.showDialog?((0,r.wg)(),(0,r.j4)(b,{key:0,ref:"dialog",modelValue:n.modelValue,onHide:t[7]||(t[7]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_file_download"}),(0,r._)("div",null,(0,a.zw)(e.$t("exportPDF")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[_]])])),_:1})])),_:1},512),(0,r.Wm)(m,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"",flat:"",icon:i.pdfPreviewUrl?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{i.pdfPreviewUrl?i.pdfPreviewUrl=void 0:l.exportPDF(!0)}),size:"md",label:i.pdfPreviewUrl?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>l.exportPDF(!1)),size:"md",label:e.$t("exportPDF.export")},null,8,["label"]),[[_]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[_]])])),_:1})])),_:1},512),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[i.pdfPreviewUrl?((0,r.wg)(),(0,r.iD)("iframe",{key:0,ref:"pdfIframe",src:i.pdfPreviewUrl,frameborder:"0",width:"100%",style:{"min-height":"inherit"}},null,8,ne)):(0,r.kq)("",!0),i.pdfPreviewUrl?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(v,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{filled:"",modelValue:i.fileName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.fileName=e),label:e.$t("exportPDF.filename"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","label","rules"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportImage"),modelValue:i.exportImage.value,"onUpdate:modelValue":t[3]||(t[3]=e=>i.exportImage.value=e),options:i.exportImage.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.exportData"),modelValue:i.exportData.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.exportData.value=e),options:i.exportData.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.textVisible"),modelValue:i.textVisible.value,"onUpdate:modelValue":t[5]||(t[5]=e=>i.textVisible.value=e),options:i.textVisible.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{"map-options":"",outlined:"",label:e.$t("exportPDF.withOriImage"),modelValue:i.withOriImage.value,"onUpdate:modelValue":t[6]||(t[6]=e=>i.withOriImage.value=e),options:i.withOriImage.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0),i.showInitDialog?((0,r.wg)(),(0,r.j4)(b,{key:1,modelValue:!0,onHide:t[8]||(t[8]=t=>e.$emit("update:modelValue",!1)),seamless:"",position:"bottom"},{default:(0,r.w5)((()=>[(0,r.Wm)(I,{style:{width:"350px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{value:i.downPrecent,color:"pink"},null,8,["value"]),(0,r.Wm)(C,{class:"row items-center no-wrap"},{default:(0,r.w5)((()=>[(0,r._)("div",re,(0,a.zw)(e.$t("exportPDF.downloadingModule")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{flat:"",round:"",icon:"close"},null,512),[[_]])])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0)],64)}(0,r.Cn)();var ie=n(9587);const ae=n.p+"97a745e4ec4d6c4f3da96103363915ee.tf";let le={},se={};var ue={Preview:"Preview",SaveToFile:"SaveToFile"},ce={NoAttach:"WithoutOriImage",AttachOnNext:"OriImageOnNext",AttachOnLast:"OriImageOnLast"};function de(){se.action=ue.Preview,se.filename="Pearocr1",se.onlyText=!1,se.visibleText=!0,se.ImageAttached=ce.AttachOnNext,se.textBGColor="#faebd7",se.addPageNum=!0,se.pageNumPading=4,se.pageNumSize=9,se.addWatermark=!0,se.watermarkPading=4,se.watermarkSize=9,se.watermarkText="power by pearocr.com"}function fe(e){return e[3]}function he(e){return-Math.atan((e[0].y-e[1].y)/(e[0].x-e[1].x))}function me(e){let t={},n=e[0],r=e[1],o=Math.sqrt((n.x-r.x)*(n.x-r.x)*1+(n.y-r.y)*(n.y-r.y));n=e[1],r=e[2];let i=Math.sqrt((n.x-r.x)*(n.x-r.x)*1+(n.y-r.y)*(n.y-r.y));return t.width=Math.max(o,i),t.height=Math.min(o,i),t}function pe(e){return le.pageWidth=e.imgWidth,le.pageHeight=e.imgHeight+2*se.watermarkPading+se.watermarkSize,se.addPageNum&&(le.pageHeight+=2*se.pageNumPading+se.pageNumSize),[le.pageHeight,le.pageWidth]}function ge(e,t){if(!se.addPageNum)return;let n=le.doc;n.setFontSize(se.watermarkSize);let r=le.pageHeight-se.pageNumPading;se.addWatermark&&(r-=2*se.watermarkPading+se.watermarkSize),n.text(e.toString()+" / "+t.toString(),le.pageWidth/2,r,{align:"center",baseline:"bottom"})}function ve(){if(!se.addWatermark)return;let e=le.doc;e.setFontSize(se.watermarkSize);let t=e.getTextColor();e.setTextColor("#1a0dbe"),e.textWithLink(se.watermarkText,le.pageWidth/2,le.pageHeight-se.watermarkPading,{align:"center",baseline:"bottom",url:"https://pearocr.com"}),e.setTextColor(t)}function we(e,t,n,r,o){let i=pe(t);e.addPage(i,i[1]>i[0]?"l":"p"),e.addImage(t.url,"JPEG",0,0,t.imgWidth,t.imgHeight,o,"FAST"),ge(n,r),ve()}de(),le.isInit=!1,le.init=()=>{if(le.xhr)return;let e=new XMLHttpRequest;e.open("GET",ae),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.responseType="text",e.onprogress=function(e){e.lengthComputable&&m.set("PDFRenderInitProgress",e.loaded/e.total)},e.onload=function(e){4===this.readyState&&200===this.status&&(le.font=this.response,le.isInit=!0,m.trig("PDFRenderInited"))},e.send(null),le.xhr=e};var ye=function(){this.addFileToVFS("simhei-normal.ttf",le.font),this.addFont("simhei-normal.ttf","simhei","normal"),this.addFont("simhei-normal.ttf","simhei","bold"),this.addFont("simhei-normal.ttf","simhei","italic"),this.addFont("simhei-normal.ttf","simhei","bolditalic")};let xe;ie.kH.API.events.push(["addFonts",ye]),le.render=(e,t)=>{Object.assign(se,t),Array.isArray(e)||(e=[e]);let n=e.length;se.ImageAttached!=ce.NoAttach&&(n*=2);let r,o=1,i=1;for(const a of e){let e=pe(a),t="img_"+i.toString();i++,void 0==r?(le.doc=new ie.kH({orientation:e[1]>e[0]?"l":"p",unit:"px",format:e,putOnlyUsedFonts:!0,floatPrecision:16,hotfixes:["px_scaling"]}),r=le.doc):r.addPage(e,e[1]>e[0]?"l":"p"),r.setFont("simhei"),!se.onlyText&&se.visibleText&&r.addImage(a.url,"JPEG",0,0,a.imgWidth,a.imgHeight,t,"FAST");for(const n of a.detail){let e=n.textEdited?n.textEdited:n.text;if(!e)continue;r.setFillColor(se.textBGColor),r.moveTo(n.rect[0].x,n.rect[0].y),r.lineTo(n.rect[1].x,n.rect[1].y),r.lineTo(n.rect[2].x,n.rect[2].y),r.lineTo(n.rect[3].x,n.rect[3].y),r.lineTo(n.rect[0].x,n.rect[0].y),r.fill();let t=me(n.rect);r.setFontSize(.85*t.height);let o=r.getFontSize(),i=r.context2d.measureText(e).width,a=0;i>t.width&&(o*=t.width/i,r.setFontSize(.85*o),i=r.context2d.measureText(e).width),i<t.width&&e.length>1&&(a=(t.width-i)/(e.length-1),i=t.width);let l=he(n.rect),s=fe(n.rect);r.text(e,s.x,s.y,{baseline:"bottom",angle:180*l/Math.PI,charSpace:a})}se.onlyText||se.visibleText||r.addImage(a.url,"JPEG",0,0,a.imgWidth,a.imgHeight,t,"FAST"),ge(o,n),o+=1,ve(),se.visibleText&&se.ImageAttached==ce.AttachOnNext&&(we(r,a,o,n,t),o+=1)}if(i=1,se.visibleText&&se.ImageAttached==ce.AttachOnLast)for(const a of e){i.toString();i++,we(r,a,o,n),o+=1}if(se.action==ue.Preview)return r.output("datauristring");se.action!=ue.SaveToFile||r.save(se.filename)};const be={data(){return{showDialog:!1,showInitDialog:!1,downPrecent:0,showText:!0,recLangCode:"",fileName:"PearOCR",pdfPreviewUrl:"",model:null,exportImage:{value:"AllImages",list:[{label:this.$t("exportPDF.AllImages"),value:"AllImages"},{label:this.$t("exportPDF.CurrentImage"),value:"CurrentImage"}]},exportData:{value:"ExportTextImage",list:[{label:this.$t("exportPDF.ExportTextImage"),value:"ExportTextImage"},{label:this.$t("exportPDF.ExportTextOnly"),value:"ExportTextOnly"}]},textVisible:{value:"Visible",list:[{label:this.$t("exportPDF.Visible"),value:"Visible"},{label:this.$t("exportPDF.Invisible"),value:"Invisible"}]},withOriImage:{value:"WithoutOriImage",list:[{label:this.$t("exportPDF.WithoutOriImage"),value:"WithoutOriImage"},{label:this.$t("exportPDF.OriImageOnNext"),value:"OriImageOnNext"},{label:this.$t("exportPDF.OriImageOnLast"),value:"OriImageOnLast"}]}}},props:["modelValue"],emits:["update:modelValue"],created(){xe=this,le.isInit?this.showDialog=!0:(m.addevent("PDFRenderInitProgress",(function(e){xe.downPrecent=e})),m.addevent("PDFRenderInited",(function(){xe.showInitDialog=!1,xe.showDialog=!0})),this.showInitDialog=!0,le.init())},methods:{exportPDF(e){let t;t="AllImages"===this.exportImage.value?L:[z.getSelectedItem()];const n={};n.onlyText="ExportTextOnly"===this.exportData.value,n.filename=this.fileName?this.fileName:"PearOCR",n.visibleText="Visible"===this.textVisible.value,n.ImageAttached=this.withOriImage.value,n.action=e?ue.Preview:ue.SaveToFile,this.pdfPreviewUrl=le.render(t,n)}}};var Te=n(5926),Ce=n(3066),Ie=n(3812),_e=n(846),Se=n(2025),Pe=n(4607),De=n(1762),ke=n(9570),We=n(2652),$e=n(4379),Ve=n(5269),Fe=n(4842),Ee=n(362),Ae=n(151),Re=n(1598),qe=n(5589),Be=n(677);be.render=oe,be.__scopeId="data-v-02045226";const Me=be;ee()(be,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:Se.Z,QBtn:Pe.Z,QFooter:De.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ee.Z,QCard:Ae.Z,QLinearProgress:Re.Z,QCardSection:qe.Z}),ee()(be,"directives",{ClosePopup:Be.Z}),(0,r.dD)("data-v-79b159e6");const Oe=["value"];function Le(e,t,n,o,i,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),h=(0,r.up)("q-toolbar"),m=(0,r.up)("q-footer"),p=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-form"),w=(0,r.up)("q-page"),y=(0,r.up)("q-page-container"),x=(0,r.up)("q-layout"),b=(0,r.up)("q-dialog"),T=(0,r.Q2)("close-popup");return n.modelValue?((0,r.wg)(),(0,r.j4)(b,{key:0,modelValue:n.modelValue,onHide:t[5]||(t[5]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_file_download"}),(0,r._)("div",null,(0,a.zw)(e.$t("exportTXT")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[T]])])),_:1})])),_:1},512),(0,r.Wm)(m,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{dense:"",flat:"",icon:i.previewTxt?"o_settings":"o_preview",onClick:t[0]||(t[0]=e=>{i.previewTxt?i.previewTxt=void 0:l.exportTXT(!0)}),size:"md",label:i.previewTxt?e.$t("exportPDF.config"):e.$t("exportPDF.preview")},null,8,["icon","label"]),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_file_download",onClick:t[1]||(t[1]=e=>l.exportTXT(!1)),size:"md",label:e.$t("exportPDF.export")},null,8,["label"]),[[T]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("exportPDF.cancel")},null,8,["label"]),[[T]])])),_:1})])),_:1},512),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[i.previewTxt?((0,r.wg)(),(0,r.iD)("textarea",{key:0,width:"100%",style:{"min-height":"inherit"},class:"textItem",value:i.previewTxt},null,8,Oe)):(0,r.kq)("",!0),i.previewTxt?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(v,{key:1,class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{filled:"",modelValue:i.fileName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.fileName=e),label:"$t('exportPDF.filename')","lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("exportPDF.mustHaveFilename")]},null,8,["modelValue","rules"]),(0,r.Wm)(g,{outlined:"","map-options":"",label:e.$t("exportTXT.exportText"),modelValue:i.exportText.value,"onUpdate:modelValue":t[3]||(t[3]=e=>i.exportText.value=e),options:i.exportText.list},null,8,["label","modelValue","options"]),(0,r.Wm)(g,{outlined:"","map-options":"",label:e.$t("exportTXT.textDivided"),modelValue:i.textDivided.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.textDivided.value=e),options:i.textDivided.list},null,8,["label","modelValue","options"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}function ze(e,t){const n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),n.dispatchEvent(e)}else n.click()}(0,r.Cn)();const He={data(){return{fileName:"PearOCR",previewTxt:"",exportText:{value:"AllTexts",list:[{label:this.$t("exportTXT.AllTexts"),value:"AllTexts"},{label:this.$t("exportTXT.CurrentText"),value:"CurrentText"}]},textDivided:{value:"DividedTexts",list:[{label:this.$t("exportTXT.DividedTexts"),value:"DividedTexts"},{label:this.$t("exportTXT.Undivided"),value:"Undivided"}]}}},props:["modelValue"],emits:["update:modelValue"],methods:{exportTXT(e){let t,n="";t="AllTexts"===this.exportText.value?L:[z.getSelectedItem()];for(const r of t)"DividedTexts"===this.textDivided.value&&(n&&(n+="\n"),n+="------------ "+r.filename+" ------------\n"),n+=r.text,n+="\n";n+="\n------------ prower by PearOCR.com ------------\n",e?this.previewTxt=n:ze(this.fileName,n)}}};He.render=Le,He.__scopeId="data-v-79b159e6";const Ze=He;ee()(He,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:Se.Z,QBtn:Pe.Z,QFooter:De.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ee.Z}),ee()(He,"directives",{ClosePopup:Be.Z}),(0,r.dD)("data-v-4f10fe76");const Ue={class:"q-gutter-md row items-start ConfigureGroup"},je={class:"q-gutter-md row items-start ConfigureGroup"};function Ne(e,t,n,o,i,l){const s=(0,r.up)("q-icon"),u=(0,r.up)("q-space"),c=(0,r.up)("q-btn"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-header"),h=(0,r.up)("q-toolbar"),m=(0,r.up)("q-footer"),p=(0,r.up)("q-input"),g=(0,r.up)("q-select"),v=(0,r.up)("q-toggle"),w=(0,r.up)("q-form"),y=(0,r.up)("q-page"),x=(0,r.up)("q-page-container"),b=(0,r.up)("q-layout"),T=(0,r.up)("q-dialog"),C=(0,r.Q2)("close-popup");return n.modelValue?((0,r.wg)(),(0,r.j4)(T,{key:0,modelValue:n.modelValue,onHide:t[6]||(t[6]=t=>e.$emit("update:modelValue",!1))},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{view:"Lhh lpR fff",container:"",class:"bg-white"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{name:"o_settings"}),(0,r._)("div",null,(0,a.zw)(e.$t("configure")),1),(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"close"},null,512),[[C]])])),_:1})])),_:1},512),(0,r.Wm)(m,{ref:"footer"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",icon:"o_check",onClick:t[0]||(t[0]=e=>l.saveConfigure()),size:"md",label:e.$t("configure.apply")},null,8,["label"]),[[C]]),(0,r.wy)((0,r.Wm)(c,{dense:"",flat:"",size:"md",icon:"close",label:e.$t("configure.cancel")},null,8,["label"]),[[C]])])),_:1})])),_:1},512),(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{class:"q-ma-md q-gutter-md"},{default:(0,r.w5)((()=>[(0,r._)("div",Ue,[(0,r.Wm)(p,{class:"col",modelValue:i.config.highlightErrWordThres,"onUpdate:modelValue":t[1]||(t[1]=e=>i.config.highlightErrWordThres=e),label:e.$t("configure.errWordThres")},null,8,["modelValue","label"]),(0,r.Wm)(g,{class:"col","map-options":"",outlined:"",modelValue:i.config.errWordHandle.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.config.errWordHandle.value=e),label:e.$t("configure.errWordHandle"),options:i.config.errWordHandle.list},null,8,["modelValue","label","options"])]),(0,r._)("div",je,[(0,r.Wm)(p,{class:"col",modelValue:i.config.recThres,"onUpdate:modelValue":t[3]||(t[3]=e=>i.config.recThres=e),label:e.$t("configure.errTextThres")},null,8,["modelValue","label"]),(0,r.Wm)(v,{class:"col",modelValue:i.config.keepLowScore,"onUpdate:modelValue":t[4]||(t[4]=e=>i.config.keepLowScore=e),label:e.$t("configure.errTextHighlight")},null,8,["modelValue","label"])]),(0,r.Wm)(g,{outlined:"",modelValue:i.config.sortingType.value,"onUpdate:modelValue":t[5]||(t[5]=e=>i.config.sortingType.value=e),label:e.$t("configure.sortingOfNewImages"),options:i.config.sortingType.list,"map-options":""},null,8,["modelValue","label","options"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}(0,r.Cn)();const Qe={data(){return{config:{errWordHandle:{value:"Normal",list:[{label:this.$t("configure.errWordHandle.Normal"),value:"Normal"},{label:this.$t("configure.errWordHandle.Highlight"),value:"Highlight"},{label:this.$t("configure.errWordHandle.IgnoreTwoEnds"),value:"IgnoreTwoEnds"},{label:this.$t("configure.errWordHandle.IgnoreTwoEndsHighlistOther"),value:"IgnoreTwoEndsHighlistOther"}]},highlightErrWordThres:"0.60",recThres:"",keepLowScore:!1,sortingType:{value:"byAddOrder",list:[{label:this.$t("configure.sortingType.byAddOrder"),value:"byAddOrder"},{label:this.$t("configure.sortingType.byFileName"),value:"byFileName"}]}}}},props:["modelValue"],emits:["update:modelValue"],mounted(){M.Z.getToDict(this.config),this.highlightErrWordThres=.6,this.recThres=.6,this.highlightErrWordThres=this.highlightErrWordThres.toString(),this.recThres=this.recThres.toString()},methods:{saveConfigure(){this.highlightErrWordThres=parseFloat(this.highlightErrWordThres),this.recThres=parseFloat(this.recThres),M.Z.setFromDict(this.config),M.Z.save(),this.highlightErrWordThres=this.highlightErrWordThres.toString(),this.recThres=this.recThres.toString()}}};var Ye=n(2582);Qe.render=Ne,Qe.__scopeId="data-v-4f10fe76";const Xe=Qe;let Ge;ee()(Qe,"components",{QDialog:Te.Z,QLayout:Ce.Z,QHeader:Ie.Z,QBar:_e.Z,QIcon:J.Z,QSpace:Se.Z,QBtn:Pe.Z,QFooter:De.Z,QToolbar:ke.Z,QPageContainer:We.Z,QPage:$e.Z,QForm:Ve.Z,QInput:Fe.Z,QSelect:Ee.Z,QToggle:Ye.Z}),ee()(Qe,"directives",{ClosePopup:Be.Z});const Je={components:{ToolBtn:te,ExportPdf:Me,ExportTxt:Ze,Configure:Xe},data(){return{ExportPdfShow:!1,ExportTxtShow:!1,ConfigureShow:!1,RecoDataList:[],selectedItem:void 0,progressVal:0,showMenu:!1,MenuItems:[{label:"menu.exportPDF",func:function(){Ge.ExportPdfShow=!0},icon:"o_picture_as_pdf",cond:this.listNotEmpty},{label:"menu.exportTXT",cond:this.listNotEmpty,func:function(){Ge.ExportTxtShow=!0},icon:"o_description"},{label:"menu.deleteAllImages",func:this.onDeleteAll,cond:this.listNotEmpty,icon:"o_delete_forever"},{label:"menu.reIdentifyAll",func:z.reRecoAll,cond:this.listNotEmpty,icon:"o_restart_alt"},{label:"menu.configure",func:function(){Ge.ConfigureShow=!0},icon:"o_settings"}]}},created(){Ge=this,z.initList(Ge.RecoDataList),console.log(z.RecoDataList),Ge.RecoDataList=z.RecoDataList,m.addevent("RecognitionBegin",(()=>{Ge.progressVal=0})),q.onProgress=function(e,t){Ge.progressVal=50*e+Math.round(t/2),100===Ge.progressVal&&(Ge.progressVal=99)},M.Z.addMonitor(["selectedItem"],this)},methods:{listNotEmpty(){return!z.empty()},onUploadClick(){m.trig("UploadImage")},onPasteImage(){z.addFromClipboard()},onItemClick(e){z.changeSelected(e.id)},onDeleteAll(){z.deleteAll(),z.selectedId>0&&this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500})},onItemDelete(e){e.isScaning?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):z.deleteItem(e.id)}},watch:{RecoDataList:{deep:!0,handler(e){}}}};var Ke=n(7369),et=n(6941),tt=n(6122),nt=n(8506),rt=n(6335),ot=n(7011),it=n(3414),at=n(2035);Je.render=f,Je.__scopeId="data-v-3a3d6e58";const lt=Je;function st(e,t,n,o,i,a){return(0,r.wg)(),(0,r.iD)("input",{ref:"inputFile",type:"file",style:{display:"none"},onChange:t[0]||(t[0]=e=>a.addImgPreview()),accept:"image/*",multiple:""},null,544)}let ut;ee()(Je,"components",{QBtn:Pe.Z,QVirtualScroll:Ke.Z,QInnerLoading:et.Z,QCircularProgress:tt.Z,QSpinnerIos:nt.Z,QIcon:J.Z,QMenu:rt.Z,QList:ot.Z,QItem:it.Z,QItemSection:at.Z}),ee()(Je,"directives",{ClosePopup:Be.Z});const ct={data(){return{RecoDataList:[]}},created(){ut=this,z.initList(ut.RecoDataList),ut.RecoDataList=z.RecoDataList,m.addevent("UploadImage",(()=>{ut.$refs.inputFile.dispatchEvent(new MouseEvent("click"))}))},methods:{addImgPreview(e){e||(e=this.$refs.inputFile.files);for(const t of e){if(!t)return void console.log("error");{if("image"!==t.type.substring(0,5))return;const e=new FileReader;e.readAsDataURL(t),e.filename=t.name,e.onload=function(t){z.addImage(this.result,e.filename)}}}this.$refs.inputFile.value=""}}};ct.render=st;const dt=ct;(0,r.dD)("data-v-b17567d4");const ft={key:1,style:{height:"100%"}};function ht(e,t,n,o,i,a){const l=(0,r.up)("RecLangToolbar"),s=(0,r.up)("RViewImageText"),u=(0,r.up)("RViewText"),c=(0,r.up)("q-splitter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r._)("div",{class:"MainImageView",onClick:t[1]||(t[1]=(...e)=>a.onMainImageViewClick&&a.onMainImageViewClick(...e))},[e.$q.screen.gt.sm?((0,r.wg)(),(0,r.j4)(c,{key:0,modelValue:i.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.splitterModel=e),style:{height:"100%"},"before-class":"NoScroll","separator-class":"splitter bg-blue-grey-7"},{before:(0,r.w5)((()=>[(0,r.Wm)(s)])),separator:(0,r.w5)((()=>[])),after:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"textView"},null,512)])),_:1},8,["modelValue"])):(0,r.kq)("",!0),e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ft,["Image"==i.ViewMode||void 0==i.selectedItem.text?((0,r.wg)(),(0,r.j4)(s,{key:0})):(0,r.kq)("",!0),"Text"==i.ViewMode&&void 0!=i.selectedItem.text?((0,r.wg)(),(0,r.j4)(u,{key:1,ref:"textView"},null,512)):(0,r.kq)("",!0)]))])],64)}(0,r.Cn)(),(0,r.dD)("data-v-9fbb7dae");const mt={class:"MainBox"},pt={ref:"mainBox",class:"imagebox"},gt=["src"],vt={key:0,class:"ToolBarPos ToolbarBorder"},wt={class:"Toolbar text-light-blue"};function yt(e,t,n,o,i,a){const l=(0,r.up)("RotateText"),s=(0,r.up)("ToolBtn"),u=(0,r.up)("CommonBar"),c=(0,r.up)("q-spinner-box"),d=(0,r.up)("q-inner-loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",mt,[(0,r._)("div",pt,[(0,r._)("img",{ref:"img",id:"mainImage",ondragstart:"return false;",src:i.selectedItem.url},null,8,gt),i.selectedItem.text&&i.selectedItem.imgWidth?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"poplayer",showBorder:i.showBorder,showText:i.showText,recoItem:i.selectedItem},null,8,["showBorder","showText","recoItem"])):(0,r.kq)("",!0)],512)]),void 0!=i.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",vt,[(0,r._)("div",wt,[e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(s,{key:0,IconName:"o_article",label:e.$t("RViewImageText.text"),onClick:t[0]||(t[0]=e=>a.switchViewModel("Text"))},null,8,["label"])),(0,r.Wm)(s,{IconName:"o_text_format",label:"",disable:!i.showText,onClick:t[1]||(t[1]=e=>i.showText=!i.showText)},null,8,["disable"]),(0,r.Wm)(s,{IconName:"o_crop_16_9",label:"",disable:!i.showBorder,onClick:t[2]||(t[2]=e=>i.showBorder=!i.showBorder)},null,8,["disable"])]),(0,r.Wm)(u)])):(0,r.kq)("",!0),(0,r.Wm)(d,{showing:i.selectedItem.isScaning},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{size:"80px",color:"primary"})])),_:1},8,["showing"])],64)}(0,r.Cn)();let xt={lastId:0},bt=!1;function Tt(e){let t=e.getAttribute("ImgHandleDataID");if(void 0==t){let n={ele:e,srcSize:[e.offsetWidth,e.offsetHeight],translate:[0,0],scale:1,maxScaleVal:10,minScaleVal:128/Math.max(e.offsetWidth,e.offsetHeight),zoomOrigin:[0,0],lastTouchTime:0,applyTransform(){this.ele.style.transform="translate("+this.translate[0].toString()+"px, "+this.translate[1].toString()+"px)scale("+this.scale.toString()+")"},move(e,t){e+=this.translate[0],t+=this.translate[1];let n=this.ele.parentNode,r=n.offsetWidth,o=n.offsetHeight,i=this.ele.offsetWidth*this.scale,a=this.ele.offsetHeight*this.scale,l=Math.max(r/2,r-i),s=Math.min(r/2-i,0);e>l&&(e=l),e<s&&(e=s),l=Math.max(o/2,o-a),s=Math.min(o/2-a,0),t>l&&(t=l),t<s&&(t=s),this.translate[0]=e,this.translate[1]=t},setPos(e,t){this.translate[0]=e,this.translate[1]=t},zoom(e){let t=this.zoomOrigin[0]*this.scale,n=this.zoomOrigin[1]*this.scale;this.scale*=e,this.scale>this.maxScaleVal?this.scale=this.maxScaleVal:this.scale<this.minScaleVal&&(this.scale=this.minScaleVal);let r=this.zoomOrigin[0]*this.scale,o=this.zoomOrigin[1]*this.scale;this.move(t-r,n-o)},setZoomOrigin(e,t){this.zoomOrigin[0]=(e-this.translate[0])/this.scale,this.zoomOrigin[1]=(t-this.translate[1])/this.scale},fillToParent(){let e=this.ele.parentNode;const t=5,n=5;let r=e.offsetWidth,o=e.offsetHeight,i=this.ele.offsetWidth,a=this.ele.offsetHeight,l=Math.min((o-2*t)/a,(r-2*n)/i);l>1&&(l=1),this.scale=l,i*=l,a*=l;let s=(r-i)/2,u=(o-a)/2;this.setPos(s,u)}};t=xt.lastId.toString(),xt.lastId++,xt[t]=n,e.setAttribute("ImgHandleDataID",t)}return xt[t]}function Ct(e,t){let n=Math.sqrt(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageX-t.pageX,2));return n}function It(e){e.preventDefault();let t=Tt(this);e||window.event;if(t.isMoved=!1,e.touches.length>=2)clearTimeout(t.OneTouchTimer),t.multPointStart=e.touches,t.setZoomOrigin(e.touches[0].pageX+(e.touches[1].pageX-e.touches[0].pageX)/2,e.touches[0].pageY+(e.touches[1].pageY-e.touches[0].pageY)/2),console.log("");else{let n=Date.now()-t.lastTouchTime;t.lastTouchTime=Date.now(),t.startPosition=[e.touches[0].pageX,e.touches[0].pageY],n>0&&n<=250?(console.log("zoom",e.touches[0]),t.setZoomOrigin(e.touches[0].pageX,e.touches[0].pageY-this.offsetTop),clearTimeout(t.OneTouchTimer),t.isDoubleTouch=!0):(t.OneTouchTimer=setTimeout((function(){console.log("",t,e),t.onTap&&t.onTap(e)}),350),t.isDoubleTouch=!1)}}function _t(e){e.preventDefault();let t=Tt(this);t.isMoved=!0,clearTimeout(t.OneTouchTimer),e.touches.length>=2?(console.log("e.touches.length >= 2"),Vt(t,e)):t.isDoubleTouch?Ft(t,e):Et(t,e)}function St(e){e.preventDefault();let t=Tt(this);1==e.touches.length&&(t.startPosition=[e.touches[0].pageX,e.touches[0].pageY]),t.isMoved||t.isDoubleTouch&&$t(t)}function Pt(e){if("SPAN"==e.target.tagName)return void(bt=!1);e.preventDefault();let t=Tt(this);t.fillToParent(),t.applyTransform()}function Dt(e){e.preventDefault();let t=Tt(this);t.setZoomOrigin(e.layerX,e.layerY);const n=e.deltaY>0?.8:1.2;t.zoom(n),t.applyTransform()}function kt(e){if(1==e.button)return;if("SPAN"==e.target.tagName)return void(bt=!1);e.preventDefault(),bt=!0;let t=Tt(this);t.startPosition=[e.layerX,e.layerY]}function Wt(e){if(1==e.button){let e=Tt(this);return e.fillToParent(),void e.applyTransform()}}function $t(e){e.fillToParent(),e.applyTransform()}function Vt(e,t){let n=t.touches,r=Ct(n[0],n[1])/Ct(e.multPointStart[0],e.multPointStart[1]);e.zoom(r),e.multPointStart=t.touches,e.applyTransform()}function Ft(e,t){let n=1+(e.startPosition[1]-t.touches[0].pageY)/150;e.zoom(n),e.applyTransform(),e.startPosition=[t.touches[0].pageX,t.touches[0].pageY]}function Et(e,t){let n=[t.touches[0].pageX,t.touches[0].pageY],r=[n[0]-e.startPosition[0],n[1]-e.startPosition[1]];e.startPosition=n,e.move(r[0],r[1]),e.applyTransform()}function At(e){if(!bt||1!=e.buttons)return;e.preventDefault();let t=Tt(this),n=[e.layerX,e.layerY],r=[n[0]-t.startPosition[0],n[1]-t.startPosition[1]];t.startPosition=n,t.move(r[0],r[1]),t.applyTransform()}function Rt(e){let t=e.getAttribute("ImgHandleDataID");t&&delete xt[t]}function qt(e){let t=e.getAttribute("ImgHandleDataID");void 0==t?(e.addEventListener("touchstart",It,!1),e.addEventListener("touchmove",_t,!1),e.addEventListener("touchend",St,!1),e.addEventListener("mousewheel",Dt,!1),e.addEventListener("dblclick",Pt,!1),e.addEventListener("mousedown",kt,!1),e.addEventListener("mouseup",Wt,!1),e.addEventListener("mousemove",At,!1),e.style.transformOrigin="0 0"):Rt(e),e.removeAttribute("ImgHandleDataID");let n=Tt(e);return n.fillToParent(),n.applyTransform(),n}(0,r.dD)("data-v-329fadd4");const Bt={class:"PosTextBoxDiv"},Mt=["onBlur","onClick"],Ot={key:0,class:"tramsformOriLT"},Lt=["innerHTML"];function zt(e,t,n,o,i,s){return(0,r.wg)(),(0,r.iD)("div",Bt,[(0,r._)("div",{class:"PosTextBox",style:(0,a.j5)(i.dCSS),ref:"PosTextBox"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.recoItem.detail,(e=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{id:"rotateBox",class:(0,a.C_)(["rotateBox",{"bg-green-3":n.showText&&!this.textBgTransparent&&e.selected,"bg-deep-orange-2":n.showText&&!this.textBgTransparent&&!e.selected&&e.text!==e.srctext,"bg-blue-grey-3":n.showText&&!this.textBgTransparent&&!e.selected&&e.text===e.srctext,rotateBoxBorder:n.showBorder&&!e.selected,rotateBoxBorderSelected:n.showBorder&&e.selected}]),onBlur:t=>s.textChange(t,e),onClick:t=>s.textClick(t,e),key:e.rect,style:(0,a.j5)(e.textCss+s.getRotateBoxColorStyle())},[n.showText?((0,r.wg)(),(0,r.iD)("div",Ot,[(0,r._)("span",{class:(0,a.C_)({errorTextColor:e.score<i.recThres&&!e.textEdited,editedTextColor:e.textEdited}),innerHTML:s.getDisplayText(e)},null,10,Lt)])):(0,r.kq)("",!0)],46,Mt)),[[l.F8,e.score>=i.recThres||i.keepLowScore]]))),128))],4)])}let Ht,Zt;function Ut(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function jt(e){for(let t=0;t<e.detail.length;t++){const n=e.detail[t];if(n.textCss)return;n.textCss="transform: matrix("+n.trMat[0].toString()+", "+n.trMat[1].toString()+", "+n.trMat[2].toString()+", "+n.trMat[3].toString()+", "+n.trMat[4].toString()+", "+n.trMat[5].toString()+");";const r=Ut(e.detail[t].rect[0],e.detail[t].rect[1]),o=Ut(e.detail[t].rect[1],e.detail[t].rect[2]),i=Math.min(r,o),a=Math.max(r,o);e.detail[t].textCss+="width: "+a.toString()+"px;height: "+i.toString()+"px;";const l=Nt(e.detail[t].text,i.toString()+"px");if(a>l+5){const n=e.detail[t].text.length,r=(a-l)/(n-1);e.detail[t].textCss+="letter-spacing: "+r.toString()+"px;",e.detail[t].textCss+="font-size: "+i.toString()+"px;"}else if(a<l){const n=a/l;e.detail[t].textCss+="font-size: "+(i*n).toString()+"px;"}else e.detail[t].textCss+="font-size: "+i.toString()+"px;"}}function Nt(e,t){const n=Nt.canvas||(Nt.canvas=document.createElement("canvas")),r=n.getContext("2d");r.font=t+" "+Zt;const o=r.measureText(e);return o.width}(0,r.Cn)();const Qt={data(){return{dCSS:"",ctWidth:0,ctHeight:0,errWordHandle:"Normal",recThres:.6,keepLowScore:!1,highlightErrWordThres:.6,textBackground:"#faebd7",textColor:"#000000",textBgTransparent:!1}},props:["recoItem","showBorder","showText"],emits:["onExitFullScreen"],methods:{textClick(e,t){e.stopPropagation(),m.set("SingleTextChoose",t)},getRotateBoxColorStyle(){let e="";return e+="color:"+this.textColor+";",e},textChange(e,t){e.target.innerText!==t.text?t.textEdited=e.target.innerText:t.textEdited="",this.$forceUpdate()},getDisplayText(e){if(e.text!==e.srctext)return e.text;if("Normal"===this.errWordHandle)return e.text;let t,n="",r=!1,o=-1;const i=this.errWordHandle.indexOf("Highlight")>=0?"<font color=red>":"",a=this.errWordHandle.indexOf("Highlight")>=0?"</font>":"";for(let l=0;l<e.wordScore.length;l++){const s=e.wordScore[l];s<Ht.highlightErrWordThres?(r||(n+=i),r=!0):(r&&(n+=a),o<0&&(o=n.length),t=n.length+1,r=!1),(s>=Ht.highlightErrWordThres||"Ignore"!==this.errWordHandle)&&(n+=e.text[l])}return r&&(n+=a),this.errWordHandle.indexOf("Ignore")>=0?o<0?"":n.slice(o,t):n},updata(e){if(!this.$refs.PosTextBox)return;const t=this.$refs.PosTextBox.parentNode;this.ctHeight=t.offsetHeight,this.ctWidth=t.offsetWidth;const n=e.imgWidth,r=e.imgHeight;this.dCSS="width: "+n.toString()+"px;height: "+r.toString()+"px;",jt(e)}},created(){Ht=this,M.Z.addMonitor(["errWordHandle","highlightErrWordThres","recThres","keepLowScore","textBackground","textColor","textBgTransparent"],Ht),window.onresize=()=>(()=>{Ht.updata(Ht.recoItem)})()},mounted:function(){this.updata(this.recoItem),Zt=window.getComputedStyle(this.$refs.PosTextBox).fontFamily},watch:{recoItem(e,t){this.updata(e)}}};Qt.render=zt,Qt.__scopeId="data-v-329fadd4";const Yt=Qt;(0,r.dD)("data-v-096a8b68");const Xt={class:"Toolbar text-light-blue"},Gt={key:1,class:"text-red-12 BtnBound iconlabel"};function Jt(e,t,n,o,i,l){const s=(0,r.up)("ToolBtn"),u=(0,r.up)("q-separator");return(0,r.wg)(),(0,r.iD)("div",Xt,[(0,r.Wm)(s,{IconName:"o_restart_alt",onClick:l.onRestartClick,label:e.$q.screen.gt.md?e.$t("bar.reRecognition"):""},null,8,["onClick","label"]),(0,r.Wm)(s,{IconName:"o_delete_outline",onClick:l.onDeleteClick,label:""},null,8,["onClick"]),i.selectedItem.detail.langCode!=i.recLangCode?((0,r.wg)(),(0,r.j4)(u,{key:0,vertical:"",inset:"",spaced:""})):(0,r.kq)("",!0),i.selectedItem.detail.langCode!=i.recLangCode?((0,r.wg)(),(0,r.iD)("div",Gt,[(0,r._)("span",null,(0,a.zw)(e.$t("langname."+i.selectedItem.detail.langCode)),1)])):(0,r.kq)("",!0)])}(0,r.Cn)();const Kt={components:{ToolBtn:te},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0,recLangCode:""}},created(){M.Z.addMonitor(["selectedItem","recLangCode"],this)},methods:{onRestartClick(){z.reReco()},onDeleteClick(){z.deleteItem(z.selectedId)}}};var en=n(5869);Kt.render=Jt,Kt.__scopeId="data-v-096a8b68";const tn=Kt;let nn,rn;ee()(Kt,"components",{QSeparator:en.Z});const on={components:{RotateText:Yt,ToolBtn:te,CommonBar:tn},data(){return{selectedItem:{url:"",text:void 0},showBorder:!1,showText:!0}},created(){M.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){window.onresize=null,Rt(rn.$refs.mainBox),m.rmevent("WindowResize",this.onWindowResize)},mounted(){rn=this,m.addevent("WindowResize",this.onWindowResize,!0)},watch:{selectedItem(e){this.onSelectedChangeCB(e.id)}},methods:{switchViewModel(e){m.set("ViewModel",e)},onWindowResize(){rn.$refs.mainBox&&rn.selectedItem.imgWidth&&(console.log("onWindowResize"),nn.fillToParent(),nn.applyTransform())},onTap(e){const t=rn.$refs.mainBox;let n=e.target;while(n!==t){if("rotateBox"===n.id){n._vei.onClick(e);break}n=n.parentNode}console.log("on tap ",e.target)},onSelectedChangeCB(e){rn.$nextTick((function(){rn.$refs.mainBox&&rn.selectedItem.imgWidth&&(rn.$refs.mainBox.style.width=rn.selectedItem.imgWidth+"px",rn.$refs.mainBox.style.height=rn.selectedItem.imgHeight+"px",nn=qt(rn.$refs.mainBox),nn.onTap=rn.onTap)}))}}};var an=n(5862);on.render=yt,on.__scopeId="data-v-9fbb7dae";const ln=on;ee()(on,"components",{QInnerLoading:et.Z,QSpinnerBox:an.Z}),(0,r.dD)("data-v-1b478c3b");const sn={key:0,ref:"mainBox",class:"textbox"},un={key:1,class:"ToolBarPos ToolbarBorder"},cn={class:"Toolbar text-light-blue"},dn={class:"text-grey-13"};function fn(e,t,n,o,i,s){const u=(0,r.up)("ToolBtn"),c=(0,r.up)("CommonBar"),d=(0,r.up)("q-inner-loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[void 0!=i.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",sn,[(0,r.wy)((0,r._)("textarea",{class:"textItem","onUpdate:modelValue":t[0]||(t[0]=e=>i.textEdited=e)},null,512),[[l.nr,i.textEdited]])],512)):(0,r.kq)("",!0),void 0!=i.selectedItem.text?((0,r.wg)(),(0,r.iD)("div",un,[(0,r._)("div",cn,[e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(u,{key:0,IconName:"o_image",label:e.$t("RViewText.Image"),onClick:t[1]||(t[1]=e=>s.switchViewModel("Image"))},null,8,["label"])),(0,r.Wm)(u,{IconName:"o_content_copy",IconSize:"27px",label:e.$t("RViewText.Copy"),onClick:t[2]||(t[2]=()=>{s.copyText()})},null,8,["label"])]),e.$q.screen.gt.sm?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0}))])):(0,r.kq)("",!0),(0,r.Wm)(d,{showing:""===i.selectedItem.text},{default:(0,r.w5)((()=>[(0,r._)("h3",dn,(0,a.zw)(e.$t("RViewText.noDetectText")),1)])),_:1},8,["showing"])],64)}(0,r.Cn)();var hn=n(7939);let mn;const pn={components:{ToolBtn:te,CommonBar:tn},data(){return{textEdited:"",selectedItem:{}}},created(){mn=this,m.addevent("SeclectedRecoStateChanged",mn.onSeclectedRecoStateChanged),M.Z.addMonitor(["selectedItem"],this)},beforeUnmount(){m.rmevent("SeclectedRecoStateChanged",mn.onSeclectedRecoStateChanged)},mounted(){},watch:{selectedItem(e){this.onSeclectedRecoStateChanged()}},methods:{onSeclectedRecoStateChanged(){this.textEdited=this.selectedItem.text},switchViewModel(e){m.set("ViewModel",e)},copyText(){if(!mn.textEdited)return;const e=(0,hn.Z)(mn.textEdited);e?this.$q.notify({message:this.$t("message.copySuccess"),color:"blue",timeout:500}):this.$q.notify({message:this.$t("message.copyFailed"),color:"red",timeout:500})}}};pn.render=fn,pn.__scopeId="data-v-1b478c3b";const gn=pn;ee()(pn,"components",{QInnerLoading:et.Z});const vn={class:"Toolbar RecLangToolbar text-light-blue"};function wn(e,t,n,o,i,l){const s=(0,r.up)("ToolBtn"),u=(0,r.up)("q-item-section"),c=(0,r.up)("q-item"),d=(0,r.up)("q-list"),f=(0,r.up)("q-menu"),h=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)("div",vn,[(0,r._)("div",null,[(0,r.Wm)(s,{label:e.$t("identityLanguage:")+" "+e.$t("langname."+i.recLangCode),IconName:"o_subtitles"},null,8,["label"]),(0,r.Wm)(f,{modelValue:i.showLangMenu,"onUpdate:modelValue":t[0]||(t[0]=e=>i.showLangMenu=e)},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.langList,(t=>((0,r.wg)(),(0,r.j4)(d,{dense:"",style:{"min-width":"100px"},key:t},{default:(0,r.w5)((()=>[t!=i.recLangCode?(0,r.wy)(((0,r.wg)(),(0,r.j4)(c,{key:0,onClick:e=>l.onRecLangChang(t),clickable:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.$t("langname."+t)),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[h]]):(0,r.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])])}const yn={components:{ToolBtn:te},data(){return{showLangMenu:!1,langList:W.langList,recLangCode:"zh-CHS"}},created(){M.Z.addMonitor(["recLangCode"],this)},methods:{onRecLangChang(e){q.isBusy?this.$q.notify({message:this.$t("message.waitIdentityFinish"),color:"red",timeout:500}):q.setLang(e)}}};yn.render=wn;const xn=yn;ee()(yn,"components",{QMenu:rt.Z,QList:ot.Z,QItem:it.Z,QItemSection:at.Z}),ee()(yn,"directives",{ClosePopup:Be.Z});const bn={components:{RViewImageText:ln,RViewText:gn,RecLangToolbar:xn},data(){return{splitterModel:60,ViewMode:"Text",selectedItem:{url:"",text:void 0}}},methods:{switchViewModel(e){this.ViewMode!==e&&(this.ViewMode=e)},onMainImageViewClick(){m.trig("MainImageViewClick")}},watch:{splitterModel(e){m.trig("WindowResize")}},created(){M.Z.addMonitor(["selectedItem"],this),m.addevent("ViewModel",this.switchViewModel)}};var Tn=n(9723);bn.render=ht,bn.__scopeId="data-v-b17567d4";const Cn=bn;ee()(bn,"components",{QSplitter:Tn.Z}),(0,r.dD)("data-v-4397ee9c");const In={style:{height:"10rem"}},_n={style:{height:"50%"},class:"bg-white imageDiv"},Sn={ref:"mainBox",class:"imagebox"},Pn={ref:"img",ondragstart:"return false;",src:""},Dn={style:{height:"50%"},class:"bg-white"};function kn(e,t,n,o,i,s){const u=(0,r.up)("q-btn"),c=(0,r.up)("q-space"),d=(0,r.up)("q-bar"),f=(0,r.up)("q-dialog");return(0,r.wg)(),(0,r.j4)(f,{modelValue:i.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dialog=e),"content-class":"mainLayout","full-width":"",seamless:"",position:i.position},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,a.zw)(i.curIndex+1)+"/"+(0,a.zw)(i.itemLength),1),(0,r.Wm)(u,{disable:!(i.curIndex>0),dense:"",flat:"",icon:"o_chevron_left",label:"",onClick:t[0]||(t[0]=e=>s.jumpTo(-1))},null,8,["disable"]),(0,r.Wm)(u,{disable:!(i.curIndex+1<i.itemLength),icon:"o_chevron_right",dense:"",flat:"",label:"",onClick:t[1]||(t[1]=e=>s.jumpTo(1))},null,8,["disable"]),(0,r.Wm)(u,{disable:i.textItem.text==i.textVal,dense:"",flat:"",icon:"o_done",label:e.$t("SingleText.modify"),onClick:s.TextModified},null,8,["disable","label","onClick"]),(0,r.Wm)(u,{disable:i.textItem.text==i.textItem.srctext,dense:"",flat:"",icon:"o_undo",label:e.$t("SingleText.restore"),onClick:s.TextReset},null,8,["disable","label","onClick"]),(0,r.Wm)(c),(0,r.Wm)(u,{dense:"",flat:"",icon:"close",onClick:t[2]||(t[2]=e=>i.dialog=!1)})])),_:1}),(0,r._)("div",In,[(0,r._)("div",_n,[(0,r._)("div",Sn,[(0,r._)("img",Pn,null,512)],512)]),(0,r._)("div",Dn,[(0,r.wy)((0,r._)("textarea",{class:"textbox","onUpdate:modelValue":t[3]||(t[3]=e=>i.textVal=e)},null,512),[[l.nr,i.textVal]])])])])])),_:1},8,["modelValue","position"])}(0,r.Cn)();const Wn={data(){return{dialog:!1,position:"bottom",textVal:"",textItem:{},curIndex:0,itemLength:10,selectedItem:{}}},created(){m.addevent("SingleTextChoose",this.onSingleTextChoose),m.addevent("WindowResize",this.onWindowResize,!0),m.addevent("MainImageViewClick",this.onMainImageViewClick,!0)},beforeUnmount(){m.rmevent("SingleTextChoose",this.onSingleTextChoose),m.rmevent("WindowResize",this.onWindowResize),m.rmevent("MainImageViewClick",this.onMainImageViewClick)},mounted(){},methods:{onMainImageViewClick(){this.textItem.selected=!1,this.dialog=!1},onWindowResize(){this.$refs.mainBox&&qt(this.$refs.mainBox)},open(e){this.position=e,this.dialog=!0},TextModified(){this.textItem.text=this.textVal,z.refreshItemText(this.selectedItem),m.trig("SeclectedRecoStateChanged")},TextReset(){this.textVal=this.textItem.srctext,this.TextModified()},jumpTo(e){m.set("SingleTextChoose",this.selectedItem.detail[this.curIndex+e])},onSingleTextChoose(e){this.selectedItem=z.getSelectedItem(),this.itemLength=this.selectedItem.detail.length,this.curIndex=this.selectedItem.detail.indexOf(e),this.textItem.selected=!1,this.textItem=e,this.textItem.selected=!0,this.dialog=!0,this.textVal=e.text,this.$nextTick((function(){const e=R(document.getElementById("mainImage"),this.textItem.rect);this.$refs.mainBox.style.width=e.width+"px",this.$refs.mainBox.style.height=e.height+"px",this.$refs.img.src=e.url,qt(this.$refs.mainBox)}))}}};Wn.render=kn,Wn.__scopeId="data-v-4397ee9c";const $n=Wn;function Vn(e,t,n,o,i,l){const s=(0,r.up)("q-circular-progress"),u=(0,r.up)("q-card"),c=(0,r.up)("q-dialog");return i.showDialog?((0,r.wg)(),(0,r.j4)(c,{key:0,modelValue:i.showDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.showDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mainCard",style:{width:"300px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{"show-value":"",value:i.progressVal,size:"150px",color:"light-blue",class:"q-ma-md"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(i.progressVal)+"%",1)])),_:1},8,["value"]),(0,r._)("h5",null,(0,a.zw)(e.$t("common.loading")+" "+e.$t("langname."+i.langname)),1)])),_:1})])),_:1},8,["modelValue"])):(0,r.kq)("",!0)}let Fn;ee()(Wn,"components",{QDialog:Te.Z,QBar:_e.Z,QBtn:Pe.Z,QSpace:Se.Z});const En={data(){return{showDialog:!0,progressVal:0,langname:"zh-CHS"}},mounted(){Fn=this,q.onprogress=function(e,t){Fn.progressVal=Math.round(e/t*100)},q.onRuntimeInitialized=function(){q.setLang(M.Z.get("recLangCode"))},q.onSetLangFinish=function(){m.set("AntOcrInited",!0),M.Z.set("recLangCode",q.langCode),M.Z.save(),Fn.showDialog=!1,Fn.progressVal=0},q.onSetLangBegin=function(e){Fn.showDialog=!0,Fn.progressVal=0,Fn.langname=e},q.init()}};En.render=Vn,En.__scopeId="data-v-36340d66";const An=En;ee()(En,"components",{QDialog:Te.Z,QCard:Ae.Z,QCircularProgress:tt.Z});const Rn=(0,r.aZ)({name:"PageIndex",components:{ImageList:lt,UploadImage:dt,MainResultView:Cn,SingleTextView:$n,RecLanguageLoader:An},methods:{onResize(){m.trig("WindowResize")}}});var qn=n(5151);Rn.render=i;const Bn=Rn;ee()(Rn,"components",{QPage:$e.Z,QResizeObserver:qn.Z});const Mn=(0,r.aZ)({name:"PageIndex",components:{Index:Bn},data(){return{}}});Mn.render=o;const On=Mn},7602:()=>{}}]);